(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Recipes"],{3790:function(e,t,r){"use strict";r.d(t,"b",function(){return l}),r.d(t,"c",function(){return c}),r.d(t,"d",function(){return u}),r.d(t,"a",function(){return p});r("96cf");var n=r("3b8d"),a=r("bc3a"),s=r.n(a);function l(){return i.apply(this,arguments)}function i(){return i=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s()({method:"get",url:"/api/recipes"});case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),i.apply(this,arguments)}function c(e,t){return o.apply(this,arguments)}function o(){return o=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s()({method:"post",url:"/api/recipe/add",data:{recipe:t,result:r}});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),o.apply(this,arguments)}function u(e,t,r){return d.apply(this,arguments)}function d(){return d=Object(n["a"])(regeneratorRuntime.mark(function e(t,r,n){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s()({method:"put",url:"/api/recipe/update",data:{newRecipe:t,newResult:r,recipeId:n}});case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),d.apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return m=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s()({method:"delete",url:"/api/recipe/delete",data:{recipeId:t}});case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),m.apply(this,arguments)}},"3f27":function(e,t,r){"use strict";r.d(t,"b",function(){return l}),r.d(t,"c",function(){return c}),r.d(t,"d",function(){return u}),r.d(t,"a",function(){return p});r("96cf");var n=r("3b8d"),a=r("bc3a"),s=r.n(a);function l(){return i.apply(this,arguments)}function i(){return i=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("/api/elements");case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),i.apply(this,arguments)}function c(e,t){return o.apply(this,arguments)}function o(){return o=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s()({method:"post",url:"/api/element/add",data:{name:t,category:r}});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),o.apply(this,arguments)}function u(e,t,r,n){return d.apply(this,arguments)}function d(){return d=Object(n["a"])(regeneratorRuntime.mark(function e(t,r,n,a){var l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s()({method:"put",url:"/api/element/update",data:{elementId:t,name:r,description:n,category:a}});case 3:return l=e.sent,e.abrupt("return",l);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),d.apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return m=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s()({method:"delete",url:"/api/element/delete",data:{elementId:t}});case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),m.apply(this,arguments)}},"63c6":function(e,t,r){"use strict";r.d(t,"a",function(){return l}),r.d(t,"b",function(){return c});r("96cf");var n=r("3b8d"),a=r("bc3a"),s=r.n(a);function l(){return i.apply(this,arguments)}function i(){return i=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("/api/categories");case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),i.apply(this,arguments)}function c(e){return o.apply(this,arguments)}function o(){return o=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s()({method:"post",url:"/api/category/add",data:{name:t}});case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),o.apply(this,arguments)}},"7f7f":function(e,t,r){var n=r("86cc").f,a=Function.prototype,s=/^\s*function ([^ (]*)/,l="name";l in a||r("9e1e")&&n(a,l,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},e46a:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"data-table"},[r("b-row",{staticClass:"mb-3"},[r("b-col",{attrs:{cols:"4"}},[r("b-input-group",[r("b-form-input",{attrs:{placeholder:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),r("b-input-group-append",[r("b-btn",{attrs:{disabled:!e.search},on:{click:function(t){e.search=null}}},[e._v("Clear")])],1)],1)],1),r("b-col",{attrs:{cols:"4",sm:"3",md:"2",lg:"2",xl:"2"}},[e.commonButton?r("b-btn",{staticClass:"mb-3",attrs:{variant:"success"},on:{click:e.commonButtonClick}},[e._v("Create "+e._s(e.target))]):e._e()],1),e._t("default",null,{type:"button"}),r("b-col",{attrs:{cols:"4",sm:"3",md:"2",lg:"2",xl:"2","offset-md":"4"}},[r("b-form-select",{attrs:{options:e.pagination.pageOptions},model:{value:e.pagination.perPage,callback:function(t){e.$set(e.pagination,"perPage",t)},expression:"pagination.perPage"}})],1)],2),r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("div",{staticClass:"text-center"},[e.loading?r("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"success"}}):e._e()],1),e.error?r("b-alert",{staticClass:"text-center",attrs:{show:"",variant:"danger"}},[e._v(e._s(e.error))]):e._e(),e.loading||e.error?e._e():r("b-table",{attrs:{"show-empty":"",responsive:"",hover:"",flex:"",items:e.data,fields:e.fields,"current-page":e.pagination.currentPage,"per-page":e.pagination.perPage,filter:e.search},scopedSlots:e._u([{key:"action",fn:function(t){return[r("b-button-group",{attrs:{size:"sm"}},[e.editButton?r("b-btn",{staticClass:"mr-1",attrs:{variant:"warning",size:"sm"},on:{click:function(r){return e.editButtonClick(t)}}},[r("font-awesome-icon",{attrs:{icon:"edit"}})],1):e._e(),e.deleteButton?r("b-btn",{attrs:{variant:"danger",size:"sm"},on:{click:function(r){return e.deleteButtonClick(t)}}},[r("font-awesome-icon",{attrs:{icon:"trash"}})],1):e._e()],1)]}}],null,!1,3492659067)},[r("b-pagination",{attrs:{align:"center","total-rows":e.totalRows,"per-page":e.pagination.perPage},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}})],1)],1)],1)],1)},a=[],s=(r("c5f6"),{props:{data:{value:Array,default:[]},fields:{value:Array,default:[]},totalRows:{value:Number,default:0},loading:{value:Boolean,default:!1},error:String,target:{value:String,default:""},commonButton:{value:Boolean,default:!0},editButton:{value:Boolean,default:!0},deleteButton:{value:Boolean,default:!0}},data:function(){return{search:null,pagination:{perPage:10,currentPage:1,pageOptions:[5,10,25,50]}}},methods:{commonButtonClick:function(){this.$emit("commonButtonClick")},editButtonClick:function(e){this.$emit("editButtonClick",e)},deleteButtonClick:function(e){this.$emit("deleteButtonClick",e)}}}),l=s,i=r("2877"),c=Object(i["a"])(l,n,a,!1,null,null,null);t["a"]=c.exports},ffc0:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("Table",{attrs:{data:e.recipes,fields:e.fields,totalRows:e.totalRows,loading:e.loading.recipes,error:e.errors.recipes,target:"recipe"},on:{commonButtonClick:e.beforeCreateRecipe,editButtonClick:e.beforeEditRecipe,deleteButtonClick:e.beforeDeleteRecipe}}),r("b-modal",{attrs:{title:"Create new recipe",size:"xl","hide-header-close":"","ok-title":"Create","ok-variant":"success","ok-disabled":e.loading.createRecipe,"cancel-disabled":e.loading.createRecipe,"cancel-variant":"danger"},on:{ok:e.createRecipe,hidden:e.afterCreateRecipe},model:{value:e.modals.create,callback:function(t){e.$set(e.modals,"create",t)},expression:"modals.create"}},[r("b-row",[r("b-col",{attrs:{cols:"4"}},[r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("b-form-group",{attrs:{label:"Result element:"}},[r("multiselect",{attrs:{placeholder:"Result element",label:"name",deselectLabel:"",options:e.elements,searchable:!0,"allow-empty":!1,"clear-on-select":!1,maxHeight:280},model:{value:e.create.resultElement,callback:function(t){e.$set(e.create,"resultElement",t)},expression:"create.resultElement"}})],1)],1)],1),r("b-row",{staticClass:"mt-2"},[r("b-col",{attrs:{cols:"12"}},[r("b-form-group",{attrs:{label:"First element:"}},[r("multiselect",{attrs:{placeholder:"First element",label:"name",deselectLabel:"",options:e.elements,searchable:!0,"allow-empty":!1,"clear-on-select":!1,maxHeight:280},model:{value:e.create.firstElement,callback:function(t){e.$set(e.create,"firstElement",t)},expression:"create.firstElement"}})],1)],1)],1),r("b-row",{staticClass:"mt-2"},[r("b-col",{attrs:{cols:"12"}},[r("b-form-group",{attrs:{label:"Second element:"}},[r("multiselect",{attrs:{placeholder:"Second element",label:"name",deselectLabel:"",options:e.elements,searchable:!0,"allow-empty":!1,"clear-on-select":!1,maxHeight:280},model:{value:e.create.secondElement,callback:function(t){e.$set(e.create,"secondElement",t)},expression:"create.secondElement"}})],1)],1)],1)],1),r("b-col",{attrs:{cols:"8"}},[r("b-card",{attrs:{"no-body":""}},[r("b-tabs",{attrs:{card:"",pills:"",vertical:"",small:"","nav-wrapper-class":"w-25"}},e._l(e.categories,function(t){return r("b-tab",{key:t._id,attrs:{title:t.name}},e._l(e.elements,function(n){return n.category===t.name?r("b-btn",{key:n._id,staticClass:"mr-2 mb-2",attrs:{size:"sm",variant:"outline-success"},on:{click:function(t){return e.pushElement(n)}}},[e._v(e._s(n.name))]):e._e()}),1)}),1)],1)],1),e.errors.createRecipe?r("b-col",{attrs:{cols:"12"}},[r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(e._s(e.errors.createRecipe))])],1):e._e()],1)],1),r("b-modal",{attrs:{title:"Edit recipe",size:"xl","hide-header-close":"","ok-title":"Save","ok-variant":"success","ok-disabled":e.loading.editRecipe,"cancel-disabled":e.loading.editRecipe,"cancel-variant":"danger"},on:{ok:e.editRecipe,hidden:e.afterEditRecipe},model:{value:e.modals.edit,callback:function(t){e.$set(e.modals,"edit",t)},expression:"modals.edit"}},[r("b-row",[r("b-col",{attrs:{cols:"4"}},[r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("b-form-group",{attrs:{label:"Result element:"}},[r("multiselect",{attrs:{placeholder:"Result element",label:"name",deselectLabel:"",options:e.elements,searchable:!0,"allow-empty":!1,"clear-on-select":!1,maxHeight:280},model:{value:e.edit.resultElement,callback:function(t){e.$set(e.edit,"resultElement",t)},expression:"edit.resultElement"}})],1)],1)],1),r("b-row",{staticClass:"mt-2"},[r("b-col",{attrs:{cols:"12"}},[r("b-form-group",{attrs:{label:"First element:"}},[r("multiselect",{attrs:{placeholder:"First element",label:"name",deselectLabel:"",options:e.elements,searchable:!0,"allow-empty":!1,"clear-on-select":!1,maxHeight:280},model:{value:e.edit.firstElement,callback:function(t){e.$set(e.edit,"firstElement",t)},expression:"edit.firstElement"}})],1)],1)],1),r("b-row",{staticClass:"mt-2"},[r("b-col",{attrs:{cols:"12"}},[r("b-form-group",{attrs:{label:"Second element:"}},[r("multiselect",{attrs:{placeholder:"Second element",label:"name",deselectLabel:"",options:e.elements,searchable:!0,"allow-empty":!1,"clear-on-select":!1,maxHeight:280},model:{value:e.edit.secondElement,callback:function(t){e.$set(e.edit,"secondElement",t)},expression:"edit.secondElement"}})],1)],1)],1)],1),r("b-col",{attrs:{cols:"8"}},[r("b-card",{attrs:{"no-body":""}},[r("b-tabs",{attrs:{card:"",pills:"",vertical:"",small:"","nav-wrapper-class":"w-25"}},[e._l(e.categories,function(t){return r("b-tab",{key:t._id,attrs:{title:t.name},on:{click:function(t){e.showRecipe=[]}}},e._l(e.elements,function(n){return n.category===t.name?r("b-btn",{key:n._id,staticClass:"mr-2 mb-2",attrs:{size:"sm",variant:"outline-success"},on:{click:function(t){return e.showElementRecipe(n)}}},[e._v(e._s(n.name))]):e._e()}),1)}),e.showRecipe.length>0?r("b-col",{attrs:{cols:"12"}},[r("p",{staticClass:"text-muted"},[e._v("Recipe of "+e._s(e.showRecipe[0].name)+": "+e._s(e.showRecipe[1].name)+" + "+e._s(e.showRecipe[2].name))])]):e._e()],2)],1),e.errors.createRecipe?r("b-col",{attrs:{cols:"12"}},[r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(e._s(e.errors.createRecipe))])],1):e._e()],1)],1)],1),r("b-modal",{attrs:{size:"md","hide-header-close":"","ok-title":"Delete","ok-variant":"success","ok-disabled":e.loading.deleteRecipe,"cancel-disabled":e.loading.deleteRecipe,"cancel-variant":"danger","hide-header":""},on:{ok:e.deleteRecipe,hidden:e.afterDeleteRecipe},model:{value:e.modals.delete,callback:function(t){e.$set(e.modals,"delete",t)},expression:"modals.delete"}},[r("b-row",{staticClass:"text-center"},[e.errors.deleteElement?e._e():r("b-col",{attrs:{cols:"12"}},[r("h4",[e._v("Delete recipe of"),r("strong",{staticClass:"text-danger"},[e._v(" "+e._s(this.delete.name))]),e._v("?")])]),e.errors.deleteElement?r("b-col",{attrs:{cols:"12"}},[r("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(e._s(e.errors.deleteElement))])],1):e._e()],1)],1)],1)},a=[],s=(r("7f7f"),r("3f27")),l=r("63c6"),i=r("3790"),c=r("e46a"),o={components:{Table:c["a"]},created:function(){this.getElements(),this.getCategories(),this.getRecipes()},watch:{$route:"getRecipes"},data:function(){return{elements:[],categories:[],recipes:[],totalRows:0,fields:[{key:"result.name",label:"Element",class:"align-middle text-center",sortable:!0},{key:"recipe",label:"Recipe",class:"align-middle text-center",sortable:!0},{key:"action",label:"Action",class:"align-middle text-center",sortable:!1}],loading:{elements:!1,categories:!1,recipes:!1,createRecipe:!1,editRecipe:!1,deleteRecipe:!1},errors:{elements:null,categories:null,recipes:null,createRecipe:null,editRecipe:null,deleteRecipe:null},modals:{create:!1,edit:!1,delete:!1},create:{resultElement:null,firstElement:null,secondElement:null},delete:{recipeId:null,name:null},edit:{firstElement:null,secondElement:null,resultElement:null,recipeId:null},showRecipe:[]}},methods:{getElements:function(){var e=this;this.errors.elements=null,this.loading.elements=!0,Object(s["b"])().then(function(t){e.loading.elements=!1,200===t.status?e.elements=t.data.response:e.data.table.error=t.data})},getCategories:function(){var e=this;this.errors.categories=null,this.loading.categories=!0,Object(l["a"])().then(function(t){e.loading.categories=!1,200===t.status?e.categories=t.data.response:e.errors.categories=t.data})},getRecipes:function(){var e=this;this.errors.recipes=null,this.loading.recipes=!0,Object(i["b"])().then(function(t){e.loading.recipes=!1,200===t.status?(e.recipes=t.data.response,e.totalRows=t.data.response.length):e.errors.recipes=t.data})},beforeCreateRecipe:function(){this.modals.create=!0},createRecipe:function(e){var t=this;e.preventDefault(),this.create.resultElement&&this.create.firstElement&&this.create.secondElement&&(this.loading.createRecipe=!0,Object(i["c"])([this.create.firstElement._id,this.create.secondElement._id],this.create.resultElement._id).then(function(e){t.loading.createRecipe=!1,201===e.status?(t.modals.create=!1,t.getRecipes()):t.errors.createRecipe=e.data}))},afterCreateRecipe:function(){this.modals.create=!1,this.create.resultElement=null,this.create.firstElement=null,this.create.secondElement=null},beforeEditRecipe:function(e){this.modals.edit=!0,this.edit.firstElement=e.item.recipe[0],this.edit.secondElement=e.item.recipe[1],this.edit.resultElement=e.item.result,this.edit.recipeId=e.item.result._id},editRecipe:function(e){var t=this;e.preventDefault(),this.loading.editRecipe=!0,Object(i["d"])([this.edit.firstElement._id,this.edit.secondElement._id],this.edit.resultElement._id,this.edit.recipeId).then(function(e){t.loading.editRecipe=!1,200===e.status?(t.modals.edit=null,t.getRecipes()):t.errors.editRecipe=e.data})},afterEditRecipe:function(){this.modals.edit=!1,this.edit.firstElement=null,this.edit.secondElement=null,this.edit.resultElement=null,this.edit.recipeId=null},beforeDeleteRecipe:function(e){this.modals.delete=!0,this.delete.recipeId=e.item.result._id,this.delete.name=e.item.result.name},deleteRecipe:function(e){var t=this;e.preventDefault(),this.loading.deleteRecipe=!0,Object(i["a"])(this.delete.recipeId).then(function(e){t.loading.deleteRecipe=!1,200===e.status?(t.modals.delete=!1,t.getRecipes()):t.errors.deleteRecipe=e.data})},afterDeleteRecipe:function(){this.modals.delete=!1,this.errors.deleteRecipe=null,this.delete.recipeId=null},pushElement:function(e){this.create.resultElement?this.create.firstElement?this.create.secondElement||(this.create.secondElement=e):this.create.firstElement=e:this.create.resultElement=e},showElementRecipe:function(e){this.showRecipe=[];for(var t=0;t<this.recipes.length;t++)if(e._id===this.recipes[t].result._id)return this.showRecipe[0]=e,this.showRecipe[1]=this.recipes[t].recipe[0],void(this.showRecipe[2]=this.recipes[t].recipe[1])}}},u=o,d=r("2877"),p=Object(d["a"])(u,n,a,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=Recipes-legacy.3bcc3788.js.map