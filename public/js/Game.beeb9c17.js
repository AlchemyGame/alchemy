(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Game"],{"001c":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("b-row",[n("GameField",[n("b-row",[n("div",{staticClass:"active-elements"},[e._l(e.activeElements,function(e){return n("Element",{key:e.gameId,attrs:{elementData:e}})}),n("ClearGameField")],2),n("div",{staticClass:"opened-elements"},e._l(e.openedElements,function(e){return n("OpenedElement",{key:e._id,attrs:{elementData:e}})}),1)])],1)],1)],1)},a=[],i=(n("ac6a"),n("ade3")),s=n("8dee"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vue-draggable-resizable",{attrs:{"class-name-active":"selected-element","class-name":"element",resizable:!1,"disable-user-select":!0,w:100,h:50,x:e.elementData.x,y:e.elementData.y,z:e.elementData.z,parent:".active-elements",onDragStart:e.onDragStart},on:{activated:e.onActivated,dragstop:e.onDragstop,deactivated:e.onDeactivated}},[e._v(e._s(e.elementData.name))])},o=[],l=n("2f62");function u(e,t){if(t.length<2)return null;let n=null,r=1e3,a=1e3;for(let i=0;i<t.length;i++){let s=Math.abs(e.x-t[i].x),c=Math.abs(e.y-t[i].y);s<r&&c<a&&e.gameId!==t[i].gameId&&(r=s,a=c,n=t[i])}return e.x+50>=n.x&&e.x-50<=n.x&&e.y+25>=n.y&&e.y-25<=n.y?n:null}function d(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function m(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};d(n,!0).forEach(function(t){Object(i["a"])(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):d(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}var p={props:{elementData:Object},computed:m({},Object(l["c"])({activeElements:"game/activeElements",selectedElement:"game/selectedElement"})),methods:m({},Object(l["b"])({addActiveElement:"game/addActiveElement",removeActiveElement:"game/removeActiveElement",setSelectedElement:"game/setSelectedElement",setSelectedElementCoordinates:"game/setSelectedElementCoordinates",removeSelectedElement:"game/removeSelectedElement"}),{onActivated(){this.setSelectedElement(this.elementData)},onDeactivated(){this.removeSelectedElement()},onDragStart(){this.setSelectedElement(this.elementData),this.setSelectedElementCoordinates({x:this.elementData.x,y:this.elementData.y,z:101})},onDragstop(e,t){if(!this.selectedElement)return;this.setSelectedElementCoordinates({x:e,y:t,z:100});let n=u(this.selectedElement,this.activeElements);n&&(this.removeActiveElement(this.selectedElement.gameId),this.removeActiveElement(n.gameId),this.addActiveElement(n)),this.removeSelectedElement()}})},f=p,h=(n("da4d"),n("2877")),g=Object(h["a"])(f,c,o,!1,null,"73a67d01",null),b=g.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vue-draggable-resizable",{attrs:{"class-name":"element","class-name-active":"selected-element",draggable:!0,"disable-user-select":!0,resizable:!1,minWidth:50,maxWidth:100,minHeight:20,maxHeight:50,w:200,h:50,x:e.elementData.x,y:e.elementData.y,z:e.elementData.z,parent:".game-field",onDragStart:e.onDragStart},on:{activated:e.onActivated,dragstop:e.onDragstop}},[e._v(e._s(e.elementData.name))])},y=[];function O(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function E(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};O(n,!0).forEach(function(t){Object(i["a"])(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):O(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}var j={props:{elementData:Object},computed:E({},Object(l["c"])({gameFieldSize:"game/gameFieldSize",elementsListFieldSize:"game/elementsListFieldSize",openedElements:"game/openedElements",activeElements:"game/activeElements",selectedElement:"game/selectedElement"})),methods:E({},Object(l["b"])({addActiveElement:"game/addActiveElement",removeActiveElement:"game/removeActiveElement",setSelectedElement:"game/setSelectedElement",setSelectedElementCoordinates:"game/setSelectedElementCoordinates",removeSelectedElement:"game/removeSelectedElement",updateOpenedElementsPositions:"game/updateOpenedElementsPositions"}),{onActivated(){this.setSelectedElement(this.elementData)},onDeactivated(){this.removeSelectedElement()},onDragStart(){this.setSelectedElement(this.elementData),this.setSelectedElementCoordinates({x:this.elementData.x,y:this.elementData.y,z:101})},onDragstop(e,t){if(this.setSelectedElementCoordinates({x:e,y:t}),e<this.gameFieldSize.x-this.elementsListFieldSize.x&&this.activeElements.length>0){let n=u(this.selectedElement,this.activeElements);n?(this.removeActiveElement(this.selectedElement.gameId),this.removeActiveElement(n.gameId),this.addActiveElement(n)):this.addActiveElement({_id:this.elementData._id,name:this.elementData.name,category:this.elementData.name.category,x:e,y:t,gameId:s["generate"]()})}0===this.activeElements.length&&this.addActiveElement({_id:this.elementData._id,name:this.elementData.name,category:this.elementData.name.category,x:e,y:t,gameId:s["generate"]()}),this.removeSelectedElement(),this.$nextTick(()=>{this.updateOpenedElementsPositions()})}})},w=j,D=(n("fed5"),Object(h["a"])(w,v,y,!1,null,"83c539ce",null)),x=D.exports,S=n("054a"),P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("font-awesome-icon",{staticClass:"fa-3x clear-game-field-button",attrs:{icon:"trash"},on:{dblclick:e.removeAllActiveElements}})},A=[];function z(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function C(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};z(n,!0).forEach(function(t){Object(i["a"])(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):z(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}var _={methods:C({},Object(l["b"])({removeAllActiveElements:"game/removeAllActiveElements"}))},I=_,F=(n("7006"),Object(h["a"])(I,P,A,!1,null,null,null)),k=F.exports,R=n("3f27"),G=n("63c6"),M=n("3790");function $(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function V(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};$(n,!0).forEach(function(t){Object(i["a"])(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):$(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}var L={components:{Element:b,OpenedElement:x,GameField:S["default"],ClearGameField:k},mounted(){const e=document.getElementsByClassName("game-field");this.setGameFieldSize({x:e[0].clientWidth,y:e[0].clientHeight}),window.addEventListener("resize",()=>{this.setGameFieldSize({x:e[0].clientWidth,y:e[0].clientHeight}),this.updateOpenedElementsPositions()}),Object(R["b"])().then(e=>{if(200===e.status){for(let t=0;t<e.data.response.length;t++)e.data.response[t].x=null,e.data.response[t].y=null,e.data.response[t].z=100;this.setOpenedElements(e.data.response)}}),Object(G["a"])().then(e=>{200===e.status&&this.setOpenedCategories(e.data.response)}),Object(M["b"])().then(e=>{200===e.status&&this.setOpenedRecipes(e.data.response)})},computed:V({},Object(l["c"])({gameFieldSize:"game/gameFieldSize",openedElements:"game/openedElements",activeElements:"game/activeElements",selectedElement:"game/selectedElement",openedCategories:"game/openedCategories",openedRecipes:"game/openedRecipes"})),methods:V({},Object(l["b"])({setGameFieldSize:"game/setGameFieldSize",setOpenedElements:"game/setOpenedElements",setActiveElements:"game/setActiveElements",setOpenedCategories:"game/setOpenedCategories",updateOpenedElementsPositions:"game/updateOpenedElementsPositions",setOpenedRecipes:"game/setOpenedRecipes",addOpenedRecipe:"game/addOpenedRecipe"}),{generateGameId(){let e=s["generate"]();for(let t=0;t<this.activeElements;t++)if(e===this.activeElements[t].gameId)return void this.generateGameId();return e}})},H=L,W=(n("6f50"),Object(h["a"])(H,r,a,!1,null,"ef4fe91c",null));t["default"]=W.exports},"054a":function(e,t,n){"use strict";var r=n("2979"),a=n("fd4c"),i=(n("b93c"),n("2877")),s=Object(i["a"])(a["default"],r["a"],r["b"],!1,null,"5adbd3a7",null);t["default"]=s.exports},"069b":function(e,t,n){"use strict";var r=n("41fa"),a=n("3df9"),i=n("dd14"),s=n("9fc2")||0;function c(t){return r.seed(t),e.exports}function o(t){return s=t,e.exports}function l(e){return void 0!==e&&r.characters(e),r.shuffled()}function u(){return a(s)}e.exports=u,e.exports.generate=u,e.exports.seed=c,e.exports.worker=o,e.exports.characters=l,e.exports.isValid=i},"091d":function(e,t,n){"use strict";var r,a="object"===typeof window&&(window.crypto||window.msCrypto);r=a&&a.getRandomValues?function(e){return a.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(256*Math.random()));return t},e.exports=r},"1b48":function(e,t,n){},2979:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-col",{staticClass:"game-field",attrs:{cols:"12"}},[e._t("default")],2)},a=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},3790:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return u}),n.d(t,"a",function(){return m});var r=n("1da1"),a=n("bc3a"),i=n.n(a);function s(){return c.apply(this,arguments)}function c(){return c=Object(r["a"])(function*(){try{const t=yield i()({method:"get",url:"/api/recipes"});return t}catch(e){return e.response}}),c.apply(this,arguments)}function o(e,t){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(function*(e,t){try{const r=yield i()({method:"post",url:"/api/recipe/add",data:{recipe:e,result:t}});return r}catch(n){return n.response}}),l.apply(this,arguments)}function u(e,t,n){return d.apply(this,arguments)}function d(){return d=Object(r["a"])(function*(e,t,n){try{const a=yield i()({method:"put",url:"/api/recipe/update",data:{newRecipe:e,newResult:t,recipeId:n}});return a}catch(r){return r.response}}),d.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(function*(e){try{const n=yield i()({method:"delete",url:"/api/recipe/delete",data:{recipeId:e}});return n}catch(t){return t.response}}),p.apply(this,arguments)}},"3df9":function(e,t,n){"use strict";var r,a,i=n("bd92"),s=(n("41fa"),1459707606518),c=6;function o(e){var t="",n=Math.floor(.001*(Date.now()-s));return n===a?r++:(r=0,a=n),t+=i(c),t+=i(e),r>0&&(t+=i(r)),t+=i(n),t}e.exports=o},"3f27":function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return u}),n.d(t,"a",function(){return m});var r=n("1da1"),a=n("bc3a"),i=n.n(a);function s(){return c.apply(this,arguments)}function c(){return c=Object(r["a"])(function*(){try{const t=yield i.a.get("/api/elements");return t}catch(e){return e.response}}),c.apply(this,arguments)}function o(e,t){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(function*(e,t){try{const r=yield i()({method:"post",url:"/api/element/add",data:{name:e,category:t}});return r}catch(n){return n.response}}),l.apply(this,arguments)}function u(e,t,n,r){return d.apply(this,arguments)}function d(){return d=Object(r["a"])(function*(e,t,n,r){try{const s=yield i()({method:"put",url:"/api/element/update",data:{elementId:e,name:t,description:n,category:r}});return s}catch(a){return a.response}}),d.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(function*(e){try{const n=yield i()({method:"delete",url:"/api/element/delete",data:{elementId:e}});return n}catch(t){return t.response}}),p.apply(this,arguments)}},"41fa":function(e,t,n){"use strict";var r,a,i,s=n("7eac"),c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function o(){i=!1}function l(e){if(e){if(e!==r){if(e.length!==c.length)throw new Error("Custom alphabet for shortid must be "+c.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter(function(e,t,n){return t!==n.lastIndexOf(e)});if(t.length)throw new Error("Custom alphabet for shortid must be "+c.length+" unique characters. These characters were not unique: "+t.join(", "));r=e,o()}}else r!==c&&(r=c,o())}function u(e){return l(e),r}function d(e){s.seed(e),a!==e&&(o(),a=e)}function m(){r||l(c);var e,t=r.split(""),n=[],a=s.nextValue();while(t.length>0)a=s.nextValue(),e=Math.floor(a*t.length),n.push(t.splice(e,1)[0]);return n.join("")}function p(){return i||(i=m(),i)}function f(e){var t=p();return t[e]}function h(){return r||c}e.exports={get:h,characters:u,seed:d,lookup:f,shuffled:p}},"509d":function(e,t){},"63c6":function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return o});var r=n("1da1"),a=n("bc3a"),i=n.n(a);function s(){return c.apply(this,arguments)}function c(){return c=Object(r["a"])(function*(){try{const t=yield i.a.get("/api/categories");return t}catch(e){return e.response}}),c.apply(this,arguments)}function o(e){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(function*(e){try{const n=yield i()({method:"post",url:"/api/category/add",data:{name:e}});return n}catch(t){return t.response}}),l.apply(this,arguments)}},"6f50":function(e,t,n){"use strict";var r=n("c78d"),a=n.n(r);a.a},7006:function(e,t,n){"use strict";var r=n("f8f0"),a=n.n(r);a.a},"7eac":function(e,t,n){"use strict";var r=1;function a(){return r=(9301*r+49297)%233280,r/233280}function i(e){r=e}e.exports={nextValue:a,seed:i}},"84c9":function(e,t,n){},"8dee":function(e,t,n){"use strict";e.exports=n("069b")},"90d6":function(e,t,n){},"9fc2":function(e,t,n){"use strict";e.exports=0},b93c:function(e,t,n){"use strict";var r=n("1b48"),a=n.n(r);a.a},bd92:function(e,t,n){"use strict";var r=n("41fa"),a=n("091d"),i=n("c903");function s(e){var t,n=0,s="";while(!t)s+=i(a,r.get(),1),t=e<Math.pow(16,n+1),n++;return s}e.exports=s},c78d:function(e,t,n){},c903:function(e,t){e.exports=function(e,t,n){var r=(2<<Math.log(t.length-1)/Math.LN2)-1,a=Math.ceil(1.6*r*n/t.length);n=+n;var i="";while(1)for(var s=e(a),c=0;c<a;c++){var o=s[c]&r;if(t[o]&&(i+=t[o],i.length===n))return i}}},da4d:function(e,t,n){"use strict";var r=n("84c9"),a=n.n(r);a.a},dd14:function(e,t,n){"use strict";var r=n("41fa");function a(e){if(!e||"string"!==typeof e||e.length<6)return!1;var t=new RegExp("[^"+r.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]");return!t.test(e)}e.exports=a},f8f0:function(e,t,n){},fd4c:function(e,t,n){"use strict";var r=n("509d"),a=n.n(r);t["default"]=a.a},fed5:function(e,t,n){"use strict";var r=n("90d6"),a=n.n(r);a.a}}]);
//# sourceMappingURL=Game.beeb9c17.js.map