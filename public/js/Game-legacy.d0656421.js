(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Game"],{"001c":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section-game"},[n("section",{staticClass:"section-categories"},[n("CategoriesList")],1),n("section",{staticClass:"section-game-board"},[n("b-container",[n("div",{staticClass:"game-board"},[e._l(e.activeElements,(function(e){return n("ActiveElement",{key:e.gameId,attrs:{elementData:e}})})),n("b-row",{staticClass:"h-100 row align-items-end"},[n("b-col",{staticClass:"pr-0 pr-sm-0 pr-md-0",attrs:{cols:"9",sm:"9",md:"9",lg:"8",xl:"8",order:"1"}},[n("ActiveElementsHistory",{directives:[{name:"show",rawName:"v-show",value:e.history.last.firstElement,expression:"history.last.firstElement"}]})],1),n("b-col",{staticClass:"ml-auto text-right",attrs:{cols:"3",sm:"3",md:"3",lg:"2",xl:"2",order:"2"}},[n("ClearGameField")],1)],1)],2)])],1),n("section",{staticClass:"section-opened-elements"},[n("OpenedElementsList",{ref:"openedElements"},e._l(e.filteredOpenedElements,(function(e){return n("OpenedElement",{key:e._id,attrs:{elementData:e}})})),1)],1)])},r=[],i=n("2f62"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("vue-draggable-resizable",{attrs:{"class-name":"active-element","class-name-active":"selected-active-element",resizable:!1,"disable-user-select":!0,w:75,h:75,x:e.elementData.x,y:e.elementData.y,z:e.elementData.z,parent:!0,onDragStart:e.onDragStart},on:{activated:e.onActivated,dragstop:e.onDragstop,deactivated:e.onDeactivated}},[s("div",{staticClass:"data"},[s("b-img",{attrs:{src:n("b9cc")}}),s("span",[e._v("\n      "+e._s(e.elementData.name)+"\n    ")])],1)])},l=[];function o(e,t){if(t.length<2)return{};var n={},s=50,r=25;return t.forEach((function(t){var i=Math.abs(e.x-t.x),a=Math.abs(e.y-t.y);i<=s&&a<=r&&e.gameId!==t.gameId&&(s=i,r=a,n=t)})),n}function c(e,t,n){var s=n.filter((function(n){return e._id===n.recipe[0]._id&&t._id===n.recipe[1]._id}));if(s.length>0)return s[0]}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={props:{elementData:Object},computed:m({},Object(i["c"])({activeElements:"elements/activeElements",selectedElement:"elements/selectedElement",openedRecipes:"recipes/openedRecipes",recipes:"recipes/recipes",state:"elements/state"})),methods:m({},Object(i["b"])({addActiveElement:"elements/addActiveElement",deleteActiveElement:"elements/deleteActiveElement",setSelectedElement:"elements/setSelectedElement",setSelectedElementCoordinates:"elements/setSelectedElementCoordinates",deleteSelectedElement:"elements/deleteSelectedElement",setOpenedElements:"elements/setOpenedElements",addOpenedRecipe:"recipes/addOpenedRecipe",addHistory:"game/addHistory",addOpenedElement:"elements/addOpenedElement",updateOpenedElementsPositions:"elements/updateOpenedElementsPositions"}),{onActivated:function(){this.setSelectedElement(this.elementData)},onDeactivated:function(){this.deleteSelectedElement()},onDragStart:function(){this.setSelectedElement(this.elementData),this.setSelectedElementCoordinates({x:this.elementData.x,y:this.elementData.y,z:101})},onDragstop:function(e,t){var n=this;if(this.selectedElement){this.setSelectedElementCoordinates({x:e,y:t,z:100});var s=o(this.selectedElement,this.activeElements);if(s.gameId){var r=c(this.selectedElement,s,this.recipes);if(0!==Object.keys(r).length){var i=this.openedRecipes.filter((function(e){return r.result._id===e._id}));0===i.length&&this.addOpenedElement(r.result).then((function(e){n.state.error||n.addOpenedRecipe(r)}));var a=m({},r.result,{x:e,y:t});this.addActiveElement(a),this.addHistory({firstElement:this.selectedElement.name,secondElement:s.name,result:r.result.name}),this.deleteActiveElement(this.selectedElement),this.deleteActiveElement(s)}}this.deleteSelectedElement()}}})},f=u,h=(n("7a8c"),n("2877")),g=Object(h["a"])(f,a,l,!1,null,"e263e574",null),O=g.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vue-draggable-resizable",{attrs:{"class-name":"element","class-name-active":"selected-element",draggable:!0,"disable-user-select":!0,resizable:!1,minHeight:40,maxHeight:40,w:280,h:40,x:e.elementData.x,y:e.elementData.y,z:e.elementData.z,onDragStart:e.onDragStart},on:{activated:e.onActivated,dragstop:e.onDragstop}},[e._v("\n  "+e._s(e.elementData.name)+"\n")])},E=[];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w={props:{elementData:Object},computed:y({},Object(i["c"])({gameFieldSize:"game/gameFieldSize",elementsListFieldSize:"game/elementsListFieldSize",openedElements:"elements/openedElements",activeElements:"elements/activeElements",selectedElement:"elements/selectedElement",recipes:"recipes/recipes",openedRecipes:"recipes/openedRecipes",openedElementsFieldSize:"game/openedElementsFieldSize",state:"elements/state"}),{openedElementWidth:function(){return this.openedElementsFieldSize.width<500?.3*this.openedElementsFieldSize.width:.2*this.openedElementsFieldSize.width}}),methods:y({},Object(i["b"])({addActiveElement:"elements/addActiveElement",deleteActiveElement:"elements/deleteActiveElement",setSelectedElement:"elements/setSelectedElement",setSelectedElementCoordinates:"elements/setSelectedElementCoordinates",deleteSelectedElement:"elements/deleteSelectedElement",updateOpenedElementsPositions:"elements/updateOpenedElementsPositions",setOpenedElements:"elements/setOpenedElements",addHistory:"game/addHistory",addOpenedRecipe:"recipes/addOpenedRecipe",addOpenedElement:"elements/addOpenedElement"}),{onActivated:function(){this.setSelectedElement(this.elementData)},onDeactivated:function(){this.deleteSelectedElement()},onDragStart:function(){this.setSelectedElement(this.elementData),this.setSelectedElementCoordinates({x:this.elementData.x,y:this.elementData.y,z:101})},onDragstop:function(e,t){var n=this;this.setSelectedElementCoordinates({x:e,y:t});var s=!1;if(e<this.gameFieldSize.x){if(this.setSelectedElementCoordinates({x:this.gameFieldSize.x-Math.abs(this.selectedElement.x),y:Math.abs(this.selectedElement.y)}),0===this.activeElements.length)s=!0;else if(this.activeElements.length>0){var r=o(this.selectedElement,this.activeElements);if(r.gameId){var i=c(this.selectedElement,r,this.recipes);if(0!==Object.keys(i).length){var a=this.openedRecipes.filter((function(e){return i.result._id===e._id}));0===a.length&&this.addOpenedElement(i.result).then((function(e){n.state.error||n.addOpenedRecipe(i)}));var l=y({},i.result,{x:this.elementData.x,y:this.selectedElement.y});this.addActiveElement(l),this.addHistory({firstElement:this.selectedElement.name,secondElement:r.name,result:i.result.name}),this.deleteActiveElement(this.selectedElement),this.deleteActiveElement(r)}else s=!0}else s=!0}}else 0===e&&(this.setSelectedElementCoordinates({x:400,y:400}),s=!0);s&&this.addActiveElement(this.elementData),this.deleteSelectedElement(),this.$nextTick((function(){n.updateOpenedElementsPositions()}))}})},P=w,A=(n("797a"),Object(h["a"])(P,b,E,!1,null,"3430212e",null)),C=A.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"clear-game-field-button"},[n("font-awesome-icon",{staticClass:"clear-game-field-button",attrs:{id:"clear-game-field-button",icon:"trash"},on:{click:e.onClick}}),n("b-popover",{attrs:{target:"clear-game-field-button",placement:"bottom",content:"Click for clear game field",show:e.showPopover},on:{shown:e.onShown}})],1)},D=[];function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k={data:function(){return{showPopover:!1,isTimeout:!1}},methods:_({},Object(i["b"])({removeAllActiveElements:"elements/deleteActiveElements"}),{onClick:function(){var e=this;this.showPopover||this.isTimeout?this.showPopover&&this.isTimeout&&setTimeout((function(){e.isTimeout=!1,e.showPopover=!1,e.removeAllActiveElements()}),0):this.showPopover=!0},onShown:function(){var e=this;this.isTimeout||(this.isTimeout=!0,setTimeout((function(){e.isTimeout=!1,e.showPopover=!1}),1500))}})},B=k,L=(n("05b3"),Object(h["a"])(B,S,D,!1,null,"12c76452",null)),F=L.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"categories-list"},[e.state.isLoading&&!e.state.error?n("div",{staticClass:"loading"},[n("b-spinner",{staticClass:"spinner"})],1):e._e(),e.state.error&&!e.state.isLoading?n("div",{staticClass:"error"},[n("div",{staticClass:"error"},[e._v("\n      "+e._s(e.state.error)+"\n    ")])]):e._e(),e._l(e.openedCategories,(function(t){return n("button",{key:t._id,staticClass:"select-category-button",class:{active:t._id===e.selectedCategory._id},on:{click:function(n){return e.selectCategory(t)}}},[e._v("\n    "+e._s(t.name)+"\n  ")])}))],2)},N=[];function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G={computed:Y({},Object(i["c"])({state:"categories/state",selectedCategory:"categories/selectedCategory",openedCategories:"categories/openedCategories"})),methods:Y({},Object(i["b"])({setSelectedCategory:"categories/setSelectedCategory",updateOpenedElementsByCategory:"elements/updateOpenedElementsByCategory"}),{selectCategory:function(e){this.setSelectedCategory(e),this.updateOpenedElementsByCategory(e)}})},U=G,H=(n("1711"),Object(h["a"])(U,R,N,!1,null,"436dfa53",null)),M=H.exports,Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"opened-elements-list"},[0===e.openedCategories.length&&e.state.isLoading&&!e.state.error?n("div",{staticClass:"loading"},[n("b-spinner",{staticClass:"spinner"})],1):e._e(),0===e.openedCategories.length&&e.state.error&&!e.state.isLoading?n("div",{staticClass:"error"},[n("div",{staticClass:"error"},[e._v("\n      "+e._s(e.state.error)+"\n    ")])]):e._e(),e._t("default")],2)},X=[];function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W={computed:J({},Object(i["c"])({state:"elements/state",openedCategories:"categories/openedCategories"}))},Z=W,q=(n("b1e1"),Object(h["a"])(Z,Q,X,!1,null,"ee2964c0",null)),$=q.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"active-elements-history",on:{click:e.showHistory}},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.history.last.firstElement&&e.history.last.secondElement,expression:"history.last.firstElement && history.last.secondElement"}]},[e._v("\n    "+e._s(e.history.last.firstElement)+" + "+e._s(e.history.last.secondElement)+"\n  ")]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.history.last.result,expression:"history.last.result"}]},[e._v("\n    = "+e._s(e.history.last.result)+"\n  ")])])},te=[];function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie={computed:se({},Object(i["c"])({history:"game/history"})),methods:{showHistory:function(){var e=[];this.history.past.forEach((function(t){e.push("".concat(t.firstElement," + ").concat(t.secondElement," = ").concat(t.result))})),console.log("history:"),e.forEach((function(e){console.log(e)}))}}},ae=ie,le=(n("593c"),Object(h["a"])(ae,ee,te,!1,null,"43605104",null)),oe=le.exports;function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(n,!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pe={components:{ActiveElement:O,OpenedElement:C,ClearGameField:F,CategoriesList:M,OpenedElementsList:$,ActiveElementsHistory:oe},mounted:function(){var e=this,t=document.getElementsByClassName("game-board");this.setGameFieldSize({x:t[0].clientWidth,y:t[0].clientHeight}),this.getOpenedElements().then((function(){e.getOpenedCategories(e.openedElements).then((function(){e.setSelectedCategory(e.openedCategories[0]),e.updateOpenedElementsByCategory(e.openedCategories[0]),e.updateOpenedElementsPositions()})),e.getRecipes().then((function(){e.findOpenedRecipes()}))}))},computed:de({},Object(i["c"])({openedElements:"elements/openedElements",activeElements:"elements/activeElements",openedCategories:"categories/openedCategories",recipes:"recipes/recipes",selectedCategory:"categories/selectedCategory",history:"game/history"}),{filteredOpenedElements:function(){return this.openedElements.filter((function(e){if(e.show)return e}))}}),methods:de({},Object(i["b"])({setGameFieldSize:"game/setGameFieldSize",getOpenedElements:"elements/getOpenedElements",setActiveElements:"elements/setActiveElements",getOpenedCategories:"categories/getOpenedCategories",setSelectedCategory:"categories/setSelectedCategory",updateOpenedElementsPositions:"elements/updateOpenedElementsPositions",setOpenedRecipes:"recipes/setOpenedRecipes",getRecipes:"recipes/getRecipes",updateOpenedElementsByCategory:"elements/updateOpenedElementsByCategory",setOpenedElementsFieldSize:"game/setOpenedElementsFieldSize"}),{findOpenedRecipes:function(){var e=this,t=[];this.recipes.forEach((function(n){e.openedElements.forEach((function(e){n.recipe[0]._id===e._id&&n.recipe[1]._id===e._id&&t.push(n)}))})),this.setOpenedRecipes(t)}})},ue=pe,fe=(n("e061"),Object(h["a"])(ue,s,r,!1,null,"5d6cc5ea",null));t["default"]=fe.exports},"05b3":function(e,t,n){"use strict";var s=n("62d3"),r=n.n(s);r.a},1711:function(e,t,n){"use strict";var s=n("5848"),r=n.n(s);r.a},2668:function(e,t,n){},"2d43":function(e,t,n){},5848:function(e,t,n){},"593c":function(e,t,n){"use strict";var s=n("8252"),r=n.n(s);r.a},"62d3":function(e,t,n){},"797a":function(e,t,n){"use strict";var s=n("c16b"),r=n.n(s);r.a},"7a8c":function(e,t,n){"use strict";var s=n("2d43"),r=n.n(s);r.a},8252:function(e,t,n){},b1e1:function(e,t,n){"use strict";var s=n("cc17"),r=n.n(s);r.a},b9cc:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA3QAAAN0BcFOiBwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANrSURBVFiFtZbNaxx1GMc/z8xkX6uUrOIGayqSNI14UZI1TX2hp+LBaEuxOVikkmwQoVf1YhD/AqGXaPXkaxtptagHKRQqCBENVKQNSa0YatIWTaPpNruzM4+Hms3OzttmTZ/TzPd5+/D8fr/5jagqLdvIYDsL104D9/PV3IOtlLBabNyF6Y5j6AFWKykyqZmW6rQEUCwMIvIlSq6mmcbPrQIYG4oeLewHOYPUNb9d5VyrAM1PoFh4GpETBEEbcrlVgOYmcKQ7ichEaLwYqTsLcKv9dZSeUL+rdxBgZLAd4Y3ImCi4/w1gOvuBZGSMbT8f6ntLIvdZPIDKwdiYir2TF7vv9ukiBlMPzTPcu6M1gMOPbgXdEwtQdU3+Fv9RfK7nM1btPCvV02GpEvkpLhb6QaYim19aWH/OJOewrDcREtjV1yiVe2u+XLaP4xd+bEyP/g6osR3ZwF1RKndB+eNAX8UZB4Ya5eglMNztzXePsar7WGCLyCSVzQPQ4JPkBRjru6chaxMBNBEPoOYxxnY9vi5Ix+YBBE+7UXwYdc8yOnD4v/dyaEFR3K7r6PDV5gAsYy4aQESATiCF6AcUB94F7KAk7VjGefY8buEyrJhNAljHAdjXO84Lj2ypyQ1hUtdmNLB5+02cJ2fBcm8L03fFNzcNF0NnGeo5R2l1N2d+f3vNtT4BVUWInmfKxnmqrjlALnBIXnNcgxulE9y89QSmuKjWCjRsQuYj6wz8CpmKV+wuxQPUm2l6ErwAwrehiWkb7Vj2yXJvGX3mT8jZ6EsLaE8MUJv5UziA434RluduW/LskJopSGcJDiwiqSqy5y/IugGBax3NiXCAYz9Mg3wTmJgNP5FeIEX7/ZMCIJW4zskLn4QDADjWCLDkq9u49lGWD4g1REkn9/pkX+D73/2B6hF/gQ3ciinHr2XTE0z+Mh0PAPDe1IfAqXpJljLNAyy3NQAlFjh18ZWg0PDb0Eq8DPp5DeCq/48r1GbrYNOJK2Szu8NCo/+IAIoDw6geRci5/b/hdl/zcnpf0ZU25KM8GIayJXmUkzP+5dwQAMCrhTw2E1g65Oy6hD6wvkfrAbRiIp/mQZOLpNv2MnnxfFzp5gDWbKxvJ2rtc3csHmLbjU53aylj/WOL2iY6n60Y3993FkveYXLm62ZL/gtdVBmCEf1CrAAAAABJRU5ErkJggg=="},c16b:function(e,t,n){},cc17:function(e,t,n){},e061:function(e,t,n){"use strict";var s=n("2668"),r=n.n(s);r.a}}]);
//# sourceMappingURL=Game-legacy.d0656421.js.map