(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Recipes"],{"3f27":function(e,t,l){"use strict";l.d(t,"b",(function(){return n})),l.d(t,"c",(function(){return o})),l.d(t,"d",(function(){return m})),l.d(t,"a",(function(){return p}));var s=l("bc3a"),a=l.n(s);function r(e,t,l,s,a,r,i){try{var n=e[r](i),c=n.value}catch(o){return void l(o)}n.done?t(c):Promise.resolve(c).then(s,a)}function i(e){return function(){var t=this,l=arguments;return new Promise((function(s,a){var i=e.apply(t,l);function n(e){r(i,s,a,n,c,"next",e)}function c(e){r(i,s,a,n,c,"throw",e)}n(void 0)}))}}function n(){return c.apply(this,arguments)}function c(){return c=i((function*(){try{const e=yield a.a.get("/api/elements");return e}catch(e){return e.response}})),c.apply(this,arguments)}function o(e,t){return d.apply(this,arguments)}function d(){return d=i((function*(e,t){try{const l=yield a()({method:"post",url:"/api/element/add",data:{name:e,category:t}});return l}catch(l){return l.response}})),d.apply(this,arguments)}function m(e,t,l,s){return u.apply(this,arguments)}function u(){return u=i((function*(e,t,l,s){try{const r=yield a()({method:"put",url:"/api/element/update",data:{elementId:e,name:t,description:l,category:s}});return r}catch(r){return r.response}})),u.apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return h=i((function*(e){try{const t=yield a()({method:"delete",url:"/api/element/delete",data:{elementId:e}});return t}catch(t){return t.response}})),h.apply(this,arguments)}},"494d":function(e,t,l){"use strict";var s=l("dee6"),a=l.n(s);a.a},dee6:function(e,t,l){},e46a:function(e,t,l){"use strict";var s=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"data-table"},[l("b-row",{staticClass:"mb-3"},[l("b-col",{staticClass:"pr-0",attrs:{cols:"6",sm:"6",md:"4",lg:"4",xl:"4"}},[l("b-input-group",[l("b-form-input",{attrs:{placeholder:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),l("b-input-group-append",[l("b-btn",{attrs:{disabled:!e.search},on:{click:function(t){e.search=""}}},[e._v("\n            Clear\n          ")])],1)],1)],1),l("b-col",{staticClass:"pr-xl-0 pr-lg-0 pr-md-0 mt-2 mt-sm-2 mt-md-0 mt-lg-0 mt-xl-0 text-right text-sm-right text-md-left text-lg-left text-xl-left",attrs:{cols:"12",sm:"12",md:"6",lg:"6",xl:"6",order:"2","order-sm":"2","order-md":"1","order-lg":"1","order-xl":"1"}},[e.commonButton?l("b-btn",{staticClass:"mb-3 mr-2",attrs:{variant:"success"},on:{click:e.commonButtonClick}},[e._v("\n        Create "+e._s(e.target)+"\n      ")]):e._e(),e._t("default",null,{type:"button"})],2),l("b-col",{attrs:{cols:"4",sm:"4",md:"2",lg:"2",xl:"2",order:"1","order-sm":"1","order-md":"2","order-lg":"2","order-xl":"2",offset:"2","offset-sm":"2","offset-md":"0","offset-lg":"0","offset-xl":"0"}},[l("b-form-select",{attrs:{options:e.pagination.pageOptions},model:{value:e.pagination.perPage,callback:function(t){e.$set(e.pagination,"perPage",t)},expression:"pagination.perPage"}})],1)],1),l("b-row",[l("b-col",{attrs:{cols:"12"}},[l("div",{staticClass:"text-center"},[e.loading?l("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"success"}}):e._e()],1),e.error?l("b-alert",{staticClass:"text-center",attrs:{show:"show",variant:"danger"}},[e._v("\n        "+e._s(e.error)+"\n      ")]):e._e(),e.loading||e.error?e._e():l("b-table",{attrs:{"show-empty":"show-empty",responsive:"responsive",hover:"hover",flex:"flex",items:e.data,fields:e.fields,"current-page":e.pagination.currentPage,"per-page":e.pagination.perPage,filter:e.search},scopedSlots:e._u([{key:"cell(action)",fn:function(t){return[l("b-button-group",{attrs:{size:"sm"}},[e.editButton?l("b-btn",{attrs:{variant:"warning",size:"sm"},on:{click:function(l){return e.editButtonClick(t)}}},[l("font-awesome-icon",{attrs:{icon:"edit"}})],1):e._e(),e.deleteButton?l("b-btn",{attrs:{variant:"danger",size:"sm"},on:{click:function(l){return e.deleteButtonClick(t)}}},[l("font-awesome-icon",{attrs:{icon:"trash"}})],1):e._e()],1)]}}],null,!1,944712545)},[l("b-pagination",{attrs:{align:"center","total-rows":e.totalRows,"per-page":e.pagination.perPage},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}})],1)],1)],1)],1)},a=[],r={props:{data:{value:Array,default:[],required:!1},fields:{value:Array,default:[],required:!1},totalRows:{value:Number,default:0,required:!1},loading:{value:Boolean,default:!1,required:!1},error:{value:String,default:"",required:!1},target:{value:String,default:"",required:!0},commonButton:{value:Boolean,default:!0,required:!1},editButton:{value:Boolean,default:!0,required:!1},deleteButton:{value:Boolean,default:!0,required:!1}},data(){return{search:null,pagination:{perPage:10,currentPage:1,pageOptions:[5,10,25,50]}}},methods:{commonButtonClick(){this.$emit("commonButtonClick")},editButtonClick(e){this.$emit("editButtonClick",e)},deleteButtonClick(e){this.$emit("deleteButtonClick",e)}}},i=r,n=l("2877"),c=Object(n["a"])(i,s,a,!1,null,null,null);t["a"]=c.exports},ffc0:function(e,t,l){"use strict";l.r(t);var s=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("section",{staticClass:"section-recipes"},[l("b-container",[l("Table",{attrs:{data:e.recipes,fields:e.fields,totalRows:e.totalRows,loading:e.loading.recipes,error:e.errors.recipes,target:"recipe"},on:{commonButtonClick:e.beforeCreateRecipe,editButtonClick:e.beforeEditRecipe,deleteButtonClick:e.beforeDeleteRecipe}}),l("b-modal",{attrs:{title:"Create new recipe",size:"xl","hide-header-close":"hide-header-close","ok-title":"Create","ok-variant":"success","ok-disabled":e.loading.createRecipe,"cancel-disabled":e.loading.createRecipe,"cancel-variant":"danger"},on:{ok:e.createRecipe,hidden:e.afterCreateRecipe},model:{value:e.modals.create,callback:function(t){e.$set(e.modals,"create",t)},expression:"modals.create"}},[l("b-row",[l("b-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"4",xl:"4"}},[l("b-row",[l("b-col",{attrs:{cols:"12"}},[l("b-form-group",{attrs:{label:"Result element:"}},[l("multiselect",{attrs:{placeholder:"Result element",label:"name",deselectLabel:"",options:e.elements,searchable:!0,"allow-empty":!1,"clear-on-select":!1,maxHeight:280},model:{value:e.create.resultElement,callback:function(t){e.$set(e.create,"resultElement",t)},expression:"create.resultElement"}})],1)],1)],1),l("b-row",{staticClass:"mt-2"},[l("b-col",{attrs:{cols:"12"}},[l("b-form-group",{attrs:{label:"First element:"}},[l("multiselect",{attrs:{placeholder:"First element",label:"name",deselectLabel:"",options:e.elements,searchable:!0,"allow-empty":!1,"clear-on-select":!1,maxHeight:280},model:{value:e.create.firstElement,callback:function(t){e.$set(e.create,"firstElement",t)},expression:"create.firstElement"}})],1)],1)],1),l("b-row",{staticClass:"mt-2"},[l("b-col",{attrs:{cols:"12"}},[l("b-form-group",{attrs:{label:"Second element:"}},[l("multiselect",{attrs:{placeholder:"Second element",label:"name",deselectLabel:"",options:e.elements,searchable:!0,"allow-empty":!1,"clear-on-select":!1,maxHeight:280},model:{value:e.create.secondElement,callback:function(t){e.$set(e.create,"secondElement",t)},expression:"create.secondElement"}})],1)],1)],1)],1),l("b-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"8",xl:"8"}},[l("b-card",{attrs:{"no-body":"no-body"}},[l("b-tabs",{attrs:{card:"card",pills:"pills",vertical:"vertical",small:"small","nav-wrapper-class":"w-30"}},e._l(e.categories,(function(t){return l("b-tab",{key:t._id,attrs:{title:t.name}},e._l(e.elements,(function(s){return s.category===t.name?l("b-btn",{key:s._id,staticClass:"mr-2 mb-2",attrs:{size:"sm",variant:"outline-success"},on:{click:function(t){return e.pushElement(s)}}},[e._v("\n                  "+e._s(s.name)+"\n                ")]):e._e()})),1)})),1)],1)],1),e.errors.createRecipe?l("b-col",{attrs:{cols:"12"}},[l("b-alert",{attrs:{show:"show",variant:"danger"}},[e._v("\n            "+e._s(e.errors.createRecipe)+"\n          ")])],1):e._e()],1)],1),l("b-modal",{attrs:{title:"Edit recipe",size:"xl","hide-header-close":"hide-header-close","ok-title":"Save","ok-variant":"success","ok-disabled":e.loading.editRecipe,"cancel-disabled":e.loading.editRecipe,"cancel-variant":"danger"},on:{ok:e.editRecipe,hidden:e.afterEditRecipe},model:{value:e.modals.edit,callback:function(t){e.$set(e.modals,"edit",t)},expression:"modals.edit"}},[l("b-row",[l("b-col",{attrs:{cols:"4"}},[l("b-row",[l("b-col",{attrs:{cols:"12"}},[l("b-form-group",{attrs:{label:"Result element:"}},[l("multiselect",{attrs:{placeholder:"Result element",label:"name",deselectLabel:"",options:e.elements,searchable:!0,"allow-empty":!1,"clear-on-select":!1,maxHeight:280},model:{value:e.edit.resultElement,callback:function(t){e.$set(e.edit,"resultElement",t)},expression:"edit.resultElement"}})],1)],1)],1),l("b-row",{staticClass:"mt-2"},[l("b-col",{attrs:{cols:"12"}},[l("b-form-group",{attrs:{label:"First element:"}},[l("multiselect",{attrs:{placeholder:"First element",label:"name",deselectLabel:"",options:e.elements,searchable:!0,"allow-empty":!1,"clear-on-select":!1,maxHeight:280},model:{value:e.edit.firstElement,callback:function(t){e.$set(e.edit,"firstElement",t)},expression:"edit.firstElement"}})],1)],1)],1),l("b-row",{staticClass:"mt-2"},[l("b-col",{attrs:{cols:"12"}},[l("b-form-group",{attrs:{label:"Second element:"}},[l("multiselect",{attrs:{placeholder:"Second element",label:"name",deselectLabel:"",options:e.elements,searchable:!0,"allow-empty":!1,"clear-on-select":!1,maxHeight:280},model:{value:e.edit.secondElement,callback:function(t){e.$set(e.edit,"secondElement",t)},expression:"edit.secondElement"}})],1)],1)],1)],1),l("b-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"8",xl:"8"}},[l("b-card",{attrs:{"no-body":"no-body"}},[l("b-tabs",{attrs:{card:"card",pills:"pills",vertical:"vertical",small:"small","nav-wrapper-class":"w-30"}},[e._l(e.categories,(function(t){return l("b-tab",{key:t._id,attrs:{title:t.name},on:{click:function(t){e.showRecipe=[]}}},e._l(e.elements,(function(s){return s.category===t.name?l("b-btn",{key:s._id,staticClass:"mr-2 mb-2",attrs:{size:"sm",variant:"outline-success"},on:{click:function(t){return e.showElementRecipe(s)}}},[e._v("\n                  "+e._s(s.name)+"\n                ")]):e._e()})),1)})),e.showRecipe.length>0?l("b-col",{attrs:{cols:"12"}},[l("p",{staticClass:"text-muted"},[e._v("\n                  Recipe of "+e._s(e.showRecipe[0].name)+": "+e._s(e.showRecipe[1].name)+" + "+e._s(e.showRecipe[2].name)+"\n                ")])]):e._e()],2)],1),e.errors.createRecipe?l("b-col",{attrs:{cols:"12"}},[l("b-alert",{attrs:{show:"show",variant:"danger"}},[e._v("\n              "+e._s(e.errors.createRecipe)+"\n            ")])],1):e._e()],1)],1)],1),l("b-modal",{attrs:{size:"md","hide-header-close":"hide-header-close","ok-title":"Delete","ok-variant":"success","ok-disabled":e.loading.deleteRecipe,"cancel-disabled":e.loading.deleteRecipe,"cancel-variant":"danger","hide-header":"hide-header"},on:{ok:e.deleteRecipe,hidden:e.afterDeleteRecipe},model:{value:e.modals.delete,callback:function(t){e.$set(e.modals,"delete",t)},expression:"modals.delete"}},[l("b-row",{staticClass:"text-center"},[e.errors.deleteElement?e._e():l("b-col",{attrs:{cols:"12"}},[l("h4",[e._v("\n            Delete recipe of\n            "),l("strong",{staticClass:"text-danger"},[e._v("\n              "+e._s(this.delete.name)+"\n            ")]),e._v("\n            ?\n          ")])]),e.errors.deleteElement?l("b-col",{attrs:{cols:"12"}},[l("b-alert",{attrs:{show:"show",variant:"danger"}},[e._v("\n            "+e._s(e.errors.deleteElement)+"\n          ")])],1):e._e()],1)],1)],1)],1)},a=[],r=l("3f27"),i=l("63c6"),n=l("3790"),c=l("e46a"),o={components:{Table:c["a"]},created(){this.getElements(),this.getCategories(),this.getRecipes()},watch:{$route:"getRecipes"},computed:{},data(){return{elements:[],categories:[],recipes:[],totalRows:0,fields:[{key:"result.name",label:"Element",class:"align-middle text-center",sortable:!0},{key:"recipe[0].name",label:"First element of recipe",class:"align-middle text-center",sortable:!0},{key:"recipe[1].name",label:"Second element of recipe",class:"align-middle text-center",sortable:!0},{key:"action",label:"Action",class:"align-middle text-center",sortable:!1}],loading:{elements:!1,categories:!1,recipes:!1,createRecipe:!1,editRecipe:!1,deleteRecipe:!1},errors:{elements:null,categories:null,recipes:null,createRecipe:null,editRecipe:null,deleteRecipe:null},modals:{create:!1,edit:!1,delete:!1},create:{resultElement:null,firstElement:null,secondElement:null},delete:{recipeId:null,name:null},edit:{firstElement:null,secondElement:null,resultElement:null,recipeId:null},showRecipe:[]}},methods:{getElements(){this.errors.elements=null,this.loading.elements=!0,Object(r["b"])().then(e=>{this.loading.elements=!1,200===e.status?this.elements=e.data.response:this.data.table.error=e.data})},getCategories(){this.errors.categories=null,this.loading.categories=!0,Object(i["a"])().then(e=>{this.loading.categories=!1,200===e.status?this.categories=e.data.response:this.errors.categories=e.data})},getRecipes(){this.errors.recipes=null,this.loading.recipes=!0,Object(n["b"])().then(e=>{this.loading.recipes=!1,200===e.status?(this.recipes=e.data.response,this.totalRows=e.data.response.length):this.errors.recipes=e.data})},beforeCreateRecipe(){this.modals.create=!0},createRecipe(e){e.preventDefault(),this.create.resultElement&&this.create.firstElement&&this.create.secondElement&&(this.loading.createRecipe=!0,Object(n["c"])([this.create.firstElement._id,this.create.secondElement._id],this.create.resultElement._id).then(e=>{this.loading.createRecipe=!1,201===e.status?(this.modals.create=!1,this.getRecipes()):this.errors.createRecipe=e.data}))},afterCreateRecipe(){this.modals.create=!1,this.create.resultElement=null,this.create.firstElement=null,this.create.secondElement=null},beforeEditRecipe(e){this.modals.edit=!0,this.edit.firstElement=e.item.recipe[0],this.edit.secondElement=e.item.recipe[1],this.edit.resultElement=e.item.result,this.edit.recipeId=e.item.result._id},editRecipe(e){e.preventDefault(),this.loading.editRecipe=!0,Object(n["d"])([this.edit.firstElement._id,this.edit.secondElement._id],this.edit.resultElement._id,this.edit.recipeId).then(e=>{this.loading.editRecipe=!1,200===e.status?(this.modals.edit=null,this.getRecipes()):this.errors.editRecipe=e.data})},afterEditRecipe(){this.modals.edit=!1,this.edit.firstElement=null,this.edit.secondElement=null,this.edit.resultElement=null,this.edit.recipeId=null},beforeDeleteRecipe(e){this.modals.delete=!0,this.delete.recipeId=e.item.result._id,this.delete.name=e.item.result.name},deleteRecipe(e){e.preventDefault(),this.loading.deleteRecipe=!0,Object(n["a"])(this.delete.recipeId).then(e=>{this.loading.deleteRecipe=!1,200===e.status?(this.modals.delete=!1,this.getRecipes()):this.errors.deleteRecipe=e.data})},afterDeleteRecipe(){this.modals.delete=!1,this.errors.deleteRecipe=null,this.delete.recipeId=null},pushElement(e){this.create.resultElement?this.create.firstElement?this.create.secondElement||(this.create.secondElement=e):this.create.firstElement=e:this.create.resultElement=e},showElementRecipe(e){this.showRecipe=[];for(let t=0;t<this.recipes.length;t++)if(e._id===this.recipes[t].result._id){this.showRecipe[0]=e,this.showRecipe[1]=this.recipes[t].recipe[0],this.showRecipe[2]=this.recipes[t].recipe[1];break}}}},d=o,m=(l("494d"),l("2877")),u=Object(m["a"])(d,s,a,!1,null,"49d28514",null);t["default"]=u.exports}}]);
//# sourceMappingURL=Recipes.4ed0b1aa.js.map