(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Game"],{"001c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("b-row",[n("b-col",{ref:"gameField",staticClass:"game-field",attrs:{cols:"12"}},[n("b-row",[n("div",{staticClass:"elements-field"},[e._l(e.activeElements,function(e){return n("game-element",{key:e.gameId,attrs:{elementData:e}})}),n("font-awesome-icon",{staticClass:"fa-3x clear-field-button",attrs:{icon:"trash"},on:{dblclick:e.clearGameField}}),n("b-button",{attrs:{variant:"warning",size:"sm",activated:e.dev},on:{click:function(t){e.dev=!e.dev}}},[e._v("Dev")]),n("b-button",{attrs:{variant:"success",size:"sm"},on:{click:function(t){return e.addRandomElement()}}},[e._v("Add random element")])],2),n("div",{staticClass:"elements-list-field"},e._l(e.openedElements,function(e){return n("elements-list",{key:e._id,attrs:{elementData:e}})}),1)]),n("p",[e._v("Dev: "+e._s(e.dev))]),!0===e.dev?[n("p",[n("small",[e._v("Selected Element: name: "+e._s(e.selectedElement.name)+", gameId: "+e._s(e.selectedElement.gameId)+", x: "+e._s(e.selectedElement.x)+", y: "+e._s(e.selectedElement.y))])]),n("p",[n("small",[e._v("Active elements:")])]),e._l(e.activeElements,function(t,a){return n("p",[n("small",[e._v("name: "+e._s(t.name)+", gameId: "+e._s(t.gameId)+", x: "+e._s(t.x)+", y: "+e._s(t.y))])])}),n("p",[n("small",[e._v("Opened elements:")])]),e._l(e.openedElements,function(t,a){return n("p",[n("small",[e._v("name: "+e._s(t.name)+", gameId: "+e._s(t.gameId)+", x: "+e._s(t.x)+", y: "+e._s(t.y))])])}),n("p",[e._v(e._s(e.error))])]:e._e()],2)],1)],1)},l=[],m=n("cebc"),s=n("2f62"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vue-draggable-resizable",{attrs:{"class-name-active":"active-element","class-name":"element",resizable:!1,w:100,h:50,x:e.elementData.x,y:e.elementData.y,parent:".elements-field","disable-user-select":!0},on:{activated:e.onActivated,dragstop:e.onDragstop,deactivated:e.onDeactivated}},[e._v(e._s(e.elementData.name))])},d=[],c=(n("7f7f"),{name:"gameElement",props:{elementData:Object},mounted:function(){this.elementCopy=this.elementData},computed:Object(m["a"])({},Object(s["c"])({gameFieldSize:"game/gameFieldSize",openedElements:"game/openedElements",activeElements:"game/activeElements",selectedElement:"game/selectedElement",openedCategories:"game/openedCategories",error:"game/error"})),data:function(){return{elementCopy:null}},methods:Object(m["a"])({},Object(s["b"])({setGameFieldSize:"game/setGameFieldSize",setOpenedElements:"game/setOpenedElements",addOpenedElement:"game/addOpenedElement",removeOpenedElement:"game/removeOpenedElement",setActiveElements:"game/setActiveElements",addActiveElement:"game/addActiveElement",removeActiveElement:"game/removeActiveElement",removeAllActiveElements:"game/removeAllActiveElements",setSelectedElement:"game/setSelectedElement",setSelectedElementCoordinates:"game/setSelectedElementCoordinates",removeSelectedElement:"game/removeSelectedElement",setOpenedCategories:"game/setOpenedCategories",updateOpenedElementsPositions:"game/updateOpenedElementsPositions"}),{onActivated:function(){this.setSelectedElement(this.elementData)},onDeactivated:function(){this.setSelectedElement(null)},onDragstop:function(e,t){this.setSelectedElementCoordinates({x:e,y:t});for(var n=this.activeElements.length,a=0;a<n;a++)if(this.selectedElement&&this.activeElements[a].gameId!==this.selectedElement.gameId&&this.activeElements[a].x<=this.selectedElement.x+50&&this.activeElements[a].x>=this.selectedElement.x-50&&this.activeElements[a].y<=this.selectedElement.y+25&&this.activeElements[a].y>=this.selectedElement.y-25){console.log("Element ".concat(this.selectedElement.name," dropped at element ").concat(this.activeElements[a].name));var l={name:parseInt(100*Math.random()),category:"Elements"};this.removeActiveElement(this.selectedElement),this.removeActiveElement(this.activeElements[a]),this.addActiveElement(l),this.removeSelectedElement()}}})}),o=c,r=(n("04ca"),n("2877")),E=Object(r["a"])(o,i,d,!1,null,null,null),v=E.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vue-draggable-resizable",{attrs:{"class-name-active":"active-element","class-name":"element",resizable:!1,draggable:!0,"disable-user-select":!0,minWidth:50,maxWidth:100,minHeight:20,maxHeight:50,w:100,h:50,x:e.elementData.x,y:e.elementData.y,parent:".game-field"},on:{activated:e.onActivated,dragstop:e.onDragstop}},[e._v(e._s(e.elementData.name))])},p=[];function u(e,t){for(var n=0;n<t.length;n++)if(t[n].gameId===e)return!1;return!0}var h={name:"elementsList",props:{elementData:Object},computed:Object(m["a"])({},Object(s["c"])({gameFieldSize:"game/gameFieldSize",elementsListFieldSize:"game/elementsListFieldSize",openedElements:"game/openedElements",activeElements:"game/activeElements",selectedElement:"game/selectedElement",openedCategories:"game/openedCategories",error:"game/error"})),methods:Object(m["a"])({},Object(s["b"])({setGameFieldSize:"game/setGameFieldSize",setOpenedElements:"game/setOpenedElements",addOpenedElement:"game/addOpenedElement",removeOpenedElement:"game/removeOpenedElement",setActiveElements:"game/setActiveElements",addActiveElement:"game/addActiveElement",removeActiveElement:"game/removeActiveElement",removeAllActiveElements:"game/removeAllActiveElements",setSelectedElement:"game/setSelectedElement",setSelectedElementCoordinates:"game/setSelectedElementCoordinates",removeSelectedElement:"game/removeSelectedElement",setOpenedCategories:"game/setOpenedCategories",updateOpenedElementsPositions:"game/updateOpenedElementsPositions"}),{onActivated:function(){this.setSelectedElement(this.elementData)},onDragstop:function(e,t){this.setSelectedElementCoordinates({x:e,y:t}),e>0&&t>0&&e<this.gameFieldSize.x-this.elementsListFieldSize.x&&u(this.selectedElement,this.activeElements)&&(this.removeOpenedElement(this.elementData),this.addActiveElement(this.elementData)),this.updateOpenedElementsPositions()}})},f=h,O=(n("6928"),Object(r["a"])(f,g,p,!1,null,null,null)),b=O.exports,S=n("5edc"),A=n("8dee"),_={name:"Game",components:{"game-element":v,"elements-list":b},beforeRouteEnter:function(e,t,n){Object(S["a"])().then(function(e){if(200===e.status){for(var t=0;t<e.data.elements.length;t++)e.data.elements[t].x=null,e.data.elements[t].y=null;n(function(t){t.setOpenedElements(e.data.elements),t.setOpenedCategories(e.data.elements)})}else n()})},mounted:function(){var e=this,t=document.getElementsByClassName("game-field");this.setGameFieldSize({x:t[0].clientWidth,y:t[0].clientHeight}),window.addEventListener("resize",function(){e.setGameFieldSize({x:t[0].clientWidth,y:t[0].clientHeight}),e.updateOpenedElementsPositions()}),this.setActiveElements([{_id:"5c543755405e9d103878d4be",name:"Earth",category:"Elements",x:200,y:250},{_id:"5c543755405e9d103878d4bf",name:"Fire",category:"Elements",x:400,y:250},{_id:"5c543755405e9d103878d4c0",name:"Water",category:"Elements",x:600,y:250}])},computed:Object(m["a"])({},Object(s["c"])({gameFieldSize:"game/gameFieldSize",openedElements:"game/openedElements",activeElements:"game/activeElements",selectedElement:"game/selectedElement",openedCategories:"game/openedCategories",error:"game/error"})),data:function(){return{dev:!1}},methods:Object(m["a"])({},Object(s["b"])({setGameFieldSize:"game/setGameFieldSize",setOpenedElements:"game/setOpenedElements",addOpenedElement:"game/addOpenedElement",removeOpenedElement:"game/removeOpenedElement",setActiveElements:"game/setActiveElements",addActiveElement:"game/addActiveElement",removeActiveElement:"game/removeActiveElement",removeAllActiveElements:"game/removeAllActiveElements",setSelectedElement:"game/setSelectedElement",setSelectedElementCoordinates:"game/setSelectedElementCoordinates",removeSelectedElement:"game/removeSelectedElement",setOpenedCategories:"game/setOpenedCategories",updateOpenedElementsPositions:"game/updateOpenedElementsPositions"}),{clearGameField:function(){this.removeAllActiveElements()},addRandomElement:function(){var e=Math.floor(Math.random()*(this.gameFieldSize.x-0+1))+0,t=Math.floor(Math.random()*(this.gameFieldSize.y-0+1))+0,n={id:A["generate"](),name:A["generate"](),x:e,y:t};this.setSelectedElement(n),this.addActiveElement(n),this.setSelectedElement(null)}})},y=_,x=(n("73aa"),Object(r["a"])(y,a,l,!1,null,null,null));t["default"]=x.exports},"04ca":function(e,t,n){"use strict";var a=n("ac1e"),l=n.n(a);l.a},"06d1":function(e,t,n){},6928:function(e,t,n){"use strict";var a=n("06d1"),l=n.n(a);l.a},"73aa":function(e,t,n){"use strict";var a=n("7f77"),l=n.n(a);l.a},"7f77":function(e,t,n){},"7f7f":function(e,t,n){var a=n("86cc").f,l=Function.prototype,m=/^\s*function ([^ (]*)/,s="name";s in l||n("9e1e")&&a(l,s,{configurable:!0,get:function(){try{return(""+this).match(m)[1]}catch(e){return""}}})},ac1e:function(e,t,n){}}]);
//# sourceMappingURL=Game.1c448c71.js.map