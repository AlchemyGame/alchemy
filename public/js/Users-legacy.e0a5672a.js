(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Users"],{"20fb":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"section-users"},[r("b-container",[r("Table",{attrs:{data:e.users,fields:e.fields,totalRows:e.totalRows,loading:e.loading.users,error:e.errors.users,target:"user",commonButton:!1,deleteButton:!1},on:{editButtonClick:e.beforeSaveUser}}),r("b-modal",{attrs:{title:"Edit user",size:"xl","hide-header-close":"hide-header-close","ok-title":"Save","ok-variant":"success","ok-disabled":e.loading.blockUser,"cancel-disabled":e.loading.blockUser,"cancel-variant":"danger"},on:{ok:e.saveUser,hidden:e.afterSaveUser},model:{value:e.modals.edit,callback:function(t){e.$set(e.modals,"edit",t)},expression:"modals.edit"}},[r("b-row",[r("b-col",{attrs:{cols:"5"}},[r("b-row",[r("b-col",{attrs:{cols:"9"}},[r("b-form-group",{attrs:{"label-cols":4,label:"Username:"}},[r("b-form-input",{attrs:{type:"text",readonly:"readonly"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1)],1),r("b-col",{attrs:{cols:"9"}},[r("b-form-group",{attrs:{"label-cols":4,label:"Email:"}},[r("b-form-input",{attrs:{type:"text",readonly:"readonly"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1)],1),r("b-col",{staticClass:"pl-0",attrs:{cols:"3"}},[r("b-btn",{attrs:{variant:"primary",disabled:e.resetPassword},on:{click:function(t){e.resetPassword=!0}}},[r("font-awesome-icon",{attrs:{icon:"key"}})],1)],1),r("b-col",{attrs:{cols:"9"}},[r("b-form-group",{attrs:{"label-cols":4,label:"Created:"}},[r("b-form-input",{attrs:{type:"text",readonly:"readonly"},model:{value:e.user.created,callback:function(t){e.$set(e.user,"created",t)},expression:"user.created"}})],1)],1),r("b-col",{attrs:{cols:"9"}},[r("b-form-group",{attrs:{"label-cols":4,label:"Last entered:"}},[r("b-form-input",{attrs:{type:"text",readonly:"readonly"},model:{value:e.user.lastEntered,callback:function(t){e.$set(e.user,"lastEntered",t)},expression:"user.lastEntered"}})],1)],1),r("b-col",{attrs:{cols:"9"}},[r("b-form-group",{attrs:{"label-cols":4,label:"Disabled:"}},[r("b-form-input",{attrs:{type:"text",readonly:"readonly"},model:{value:e.user.isDisabled,callback:function(t){e.$set(e.user,"isDisabled",t)},expression:"user.isDisabled"}})],1)],1),r("b-col",{staticClass:"pl-0",attrs:{cols:"3"}},[e.user.isDisabled?e._e():r("b-btn",{attrs:{variant:"success"},on:{click:function(t){e.user.isDisabled=!0}}},[r("font-awesome-icon",{attrs:{icon:"user"}})],1),e.user.isDisabled?r("b-btn",{attrs:{variant:"danger"},on:{click:function(t){e.user.isDisabled=!1}}},[r("font-awesome-icon",{attrs:{icon:"user-slash"}})],1):e._e()],1),r("b-col",{attrs:{cols:"9"}},[r("b-form-group",{attrs:{"label-cols":4,label:"Role:"}},[r("b-form-input",{attrs:{type:"text",readonly:"readonly"},model:{value:e.user.role,callback:function(t){e.$set(e.user,"role",t)},expression:"user.role"}})],1)],1),r("b-col",{staticClass:"pl-0",attrs:{cols:"3"}},["Admin"!=e.user.role?r("b-btn",{attrs:{variant:"success"},on:{click:function(t){e.user.role="Admin"}}},[r("font-awesome-icon",{attrs:{icon:"arrow-up"}})],1):e._e(),"User"==e.user.role?r("b-btn",{attrs:{variant:"danger"},on:{click:function(t){e.user.role="User"}}},[r("font-awesome-icon",{attrs:{icon:"arrow-down"}})],1):e._e()],1)],1)],1),r("b-col",{attrs:{cols:"7"}},[r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("h5",[e._v("\n                Opened elements\n              ")]),r("b-progress",{staticClass:"mb-3",attrs:{value:e.userElements.length,max:e.maxElements,"show-value":"show-value"}})],1)],1)],1)],1)],1)],1)],1)},a=[],s=r("e46a"),o=r("a34a"),l=r.n(o),i=r("bc3a"),c=r.n(i);function u(e,t,r,n,a,s,o){try{var l=e[s](o),i=l.value}catch(c){return void r(c)}l.done?t(i):Promise.resolve(i).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function o(e){u(s,n,a,o,l,"next",e)}function l(e){u(s,n,a,o,l,"throw",e)}o(void 0)}))}}function p(){return m.apply(this,arguments)}function m(){return m=d(l.a.mark((function e(){var t;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c()({method:"get",url:"/api/users"});case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),m.apply(this,arguments)}var b=r("5edc"),f=r("3f27"),h={components:{Table:s["a"]},mounted:function(){var e=this;this.loading.users=!0,p().then((function(t){e.loading.users=!1,200===t.status?(e.users=t.data.response,e.totalRows=t.data.response.length,e.transformDate()):e.errors.users=t.data})),Object(f["b"])().then((function(t){200===t.status&&(e.maxElements=t.data.response.length)}))},data:function(){return{users:[],user:{username:null,email:null,created:null,lastEntered:null,isDisabled:null,role:null},userElements:[],maxElements:0,modals:{edit:!1},loading:{users:!1,userElements:!1,blockUser:!1,resetPassword:!1,changeRole:!1},errors:{users:null,userElements:null,blockUser:null,resetPassword:null,changeRole:null},resetPassword:!1,totalRows:0,fields:[{key:"username",label:"Username",class:"align-middle text-center",sortable:!0},{key:"created",label:"Created",class:"align-middle text-center",sortable:!0},{key:"lastEntered",label:"Last entered",class:"align-middle text-center",sortable:!0},{key:"isDisabled",label:"Disabled",class:"align-middle text-center",sortable:!0},{key:"action",label:"Action",class:"align-middle text-center",sortable:!1}]}},methods:{getUserElements:function(){var e=this;this.loading.userElements=!0,Object(b["b"])(this.user._id).then((function(t){e.loading.userElements=!1,200===t.status?e.userElements=t.data.elements:e.errors.userElements=t.data}))},transformDate:function(){for(var e=0;e<this.users.length;e++){var t=new Date(this.users[e].created),r=new Date(this.users[e].lastEntered),n=t.getDate(),a=t.getMonth()+1,s=t.getHours(),o=t.getMinutes();n<10&&(n="0".concat(n)),a<10&&(a="0".concat(a)),s<10&&(s="0".concat(s)),o<10&&(o="0".concat(o)),this.users[e].created="".concat(n,".").concat(a,".").concat(t.getFullYear()," ").concat(s,":").concat(o),n=r.getDate(),a=r.getMonth()+1,s=r.getHours(),o=r.getMinutes(),n<10&&(n="0".concat(n)),a<10&&(a="0".concat(a)),s<10&&(s="0".concat(s)),o<10&&(o="0".concat(o)),this.users[e].lastEntered="".concat(n,".").concat(a,".").concat(r.getFullYear()," ").concat(s,":").concat(o)}},beforeBlockUser:function(){this.user.isDisabled=!0},blockUser:function(){},afterBlockUser:function(){},beforeSaveUser:function(e){this.modals.edit=!0,this.user=e.item,this.getUserElements()},saveUser:function(){this.resetPassword&&Object(b["d"])(this.user.email).then((function(e){e.status}))},afterSaveUser:function(){this.modals.edit=!1,this.user={}}}},g=h,v=(r("9673"),r("2877")),w=Object(v["a"])(g,n,a,!1,null,"5d365681",null);t["default"]=w.exports},"3f27":function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return m})),r.d(t,"a",(function(){return f}));var n=r("a34a"),a=r.n(n),s=r("bc3a"),o=r.n(s);function l(e,t,r,n,a,s,o){try{var l=e[s](o),i=l.value}catch(c){return void r(c)}l.done?t(i):Promise.resolve(i).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function o(e){l(s,n,a,o,i,"next",e)}function i(e){l(s,n,a,o,i,"throw",e)}o(void 0)}))}}function c(){return u.apply(this,arguments)}function u(){return u=i(a.a.mark((function e(){var t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get("/api/elements");case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),u.apply(this,arguments)}function d(e,t){return p.apply(this,arguments)}function p(){return p=i(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o()({method:"post",url:"/api/element/add",data:{name:t,category:r}});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),p.apply(this,arguments)}function m(e,t,r,n){return b.apply(this,arguments)}function b(){return b=i(a.a.mark((function e(t,r,n,s){var l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o()({method:"put",url:"/api/element/update",data:{elementId:t,name:r,description:n,category:s}});case 3:return l=e.sent,e.abrupt("return",l);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),b.apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return h=i(a.a.mark((function e(t){var r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o()({method:"delete",url:"/api/element/delete",data:{elementId:t}});case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),h.apply(this,arguments)}},"4ba2":function(e,t,r){},9673:function(e,t,r){"use strict";var n=r("4ba2"),a=r.n(n);a.a},e46a:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"data-table"},[r("b-row",{staticClass:"mb-3"},[r("b-col",{staticClass:"pr-0",attrs:{cols:"6",sm:"6",md:"4",lg:"4",xl:"4"}},[r("b-input-group",[r("b-form-input",{attrs:{placeholder:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),r("b-input-group-append",[r("b-btn",{attrs:{disabled:!e.search},on:{click:function(t){e.search=""}}},[e._v("\n            Clear\n          ")])],1)],1)],1),r("b-col",{staticClass:"pr-xl-0 pr-lg-0 pr-md-0 mt-2 mt-sm-2 mt-md-0 mt-lg-0 mt-xl-0 text-right text-sm-right text-md-left text-lg-left text-xl-left",attrs:{cols:"12",sm:"12",md:"6",lg:"6",xl:"6",order:"2","order-sm":"2","order-md":"1","order-lg":"1","order-xl":"1"}},[e.commonButton?r("b-btn",{staticClass:"mb-3 mr-2",attrs:{variant:"success"},on:{click:e.commonButtonClick}},[e._v("\n        Create "+e._s(e.target)+"\n      ")]):e._e(),e._t("default",null,{type:"button"})],2),r("b-col",{attrs:{cols:"4",sm:"4",md:"2",lg:"2",xl:"2",order:"1","order-sm":"1","order-md":"2","order-lg":"2","order-xl":"2",offset:"2","offset-sm":"2","offset-md":"0","offset-lg":"0","offset-xl":"0"}},[r("b-form-select",{attrs:{options:e.pagination.pageOptions},model:{value:e.pagination.perPage,callback:function(t){e.$set(e.pagination,"perPage",t)},expression:"pagination.perPage"}})],1)],1),r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("div",{staticClass:"text-center"},[e.loading?r("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"success"}}):e._e()],1),e.error?r("b-alert",{staticClass:"text-center",attrs:{show:"show",variant:"danger"}},[e._v("\n        "+e._s(e.error)+"\n      ")]):e._e(),e.loading||e.error?e._e():r("b-table",{attrs:{"show-empty":"show-empty",responsive:"responsive",hover:"hover",flex:"flex",items:e.data,fields:e.fields,"current-page":e.pagination.currentPage,"per-page":e.pagination.perPage,filter:e.search},scopedSlots:e._u([{key:"cell(action)",fn:function(t){return[r("b-button-group",{attrs:{size:"sm"}},[e.editButton?r("b-btn",{attrs:{variant:"warning",size:"sm"},on:{click:function(r){return e.editButtonClick(t)}}},[r("font-awesome-icon",{attrs:{icon:"edit"}})],1):e._e(),e.deleteButton?r("b-btn",{attrs:{variant:"danger",size:"sm"},on:{click:function(r){return e.deleteButtonClick(t)}}},[r("font-awesome-icon",{attrs:{icon:"trash"}})],1):e._e()],1)]}}],null,!1,944712545)},[r("b-pagination",{attrs:{align:"center","total-rows":e.totalRows,"per-page":e.pagination.perPage},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}})],1)],1)],1)],1)},a=[],s={props:{data:{value:Array,default:[],required:!1},fields:{value:Array,default:[],required:!1},totalRows:{value:Number,default:0,required:!1},loading:{value:Boolean,default:!1,required:!1},error:{value:String,default:"",required:!1},target:{value:String,default:"",required:!0},commonButton:{value:Boolean,default:!0,required:!1},editButton:{value:Boolean,default:!0,required:!1},deleteButton:{value:Boolean,default:!0,required:!1}},data:function(){return{search:null,pagination:{perPage:10,currentPage:1,pageOptions:[5,10,25,50]}}},methods:{commonButtonClick:function(){this.$emit("commonButtonClick")},editButtonClick:function(e){this.$emit("editButtonClick",e)},deleteButtonClick:function(e){this.$emit("deleteButtonClick",e)}}},o=s,l=r("2877"),i=Object(l["a"])(o,n,a,!1,null,null,null);t["a"]=i.exports}}]);
//# sourceMappingURL=Users-legacy.e0a5672a.js.map