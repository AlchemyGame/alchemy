(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Game"],{"001c":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("b-row",[n("GameField",[n("b-row",[n("div",{staticClass:"active-elements"},[e._l(e.activeElements,function(e){return n("Element",{key:e.gameId,attrs:{elementData:e}})}),n("ClearGameField")],2),n("div",{staticClass:"opened-elements"},e._l(e.openedElements,function(e){return n("OpenedElement",{key:e._id,attrs:{elementData:e}})}),1)])],1),n("b-col",{attrs:{cols:"5"}},e._l(e.activeElements,function(t){return n("p",[e._v(e._s(t))])}),0),n("b-col",{attrs:{cols:"5"}},e._l(e.openedElements,function(t){return n("p",[e._v(e._s(t))])}),0),n("b-col",{attrs:{cols:"2"}},[e._v(e._s(e.selectedElement))])],1)],1)},a=[],s=(n("ac6a"),n("ade3")),i=n("8dee"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vue-draggable-resizable",{attrs:{"class-name-active":"selected-element","class-name":"element",resizable:!1,"disable-user-select":!0,w:100,h:50,x:e.elementData.x,y:e.elementData.y,z:e.elementData.z,parent:".active-elements",onDragStart:e.onDragStart},on:{activated:e.onActivated,dragstop:e.onDragstop,deactivated:e.onDeactivated}},[e._v(e._s(e.elementData.name))])},c=[],o=n("2f62");function m(e,t){if(e&&e.gameId!==t.gameId){if(e.x+50>=t.x&&e.x-50<=t.x&&e.y+25>=t.y&&e.y-25<=t.y){const e={name:parseInt(100*Math.random()),category:"Elements",gameId:i["generate"]()};return e}return null}}function d(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function u(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};d(n,!0).forEach(function(t){Object(s["a"])(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):d(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}var f={props:{elementData:Object},computed:u({},Object(o["c"])({activeElements:"game/activeElements",selectedElement:"game/selectedElement"})),methods:u({},Object(o["b"])({addActiveElement:"game/addActiveElement",removeActiveElement:"game/removeActiveElement",setSelectedElement:"game/setSelectedElement",setSelectedElementCoordinates:"game/setSelectedElementCoordinates",removeSelectedElement:"game/removeSelectedElement"}),{onActivated(){this.setSelectedElement(this.elementData)},onDeactivated(){this.removeSelectedElement()},onDragStart(){this.setSelectedElement(this.elementData),this.setSelectedElementCoordinates({x:this.elementData.x,y:this.elementData.y,z:101})},onDragstop(e,t){if(!this.selectedElement)return;this.setSelectedElementCoordinates({x:e,y:t,z:100});const n=this.activeElements.length;let r=null;for(let a=0;a<n;a++)if(r=m(this.selectedElement,this.activeElements[a]),r){this.removeActiveElement(this.selectedElement.gameId),this.removeActiveElement(this.activeElements[a].gameId),this.addActiveElement(r);break}this.selectedElement.x>=0&&this.selectedElement.x<=50&&this.selectedElement.y>=0&&this.selectedElement.y<=50&&this.removeActiveElement(this.selectedElement.gameId),this.removeSelectedElement()}})},p=f,h=(n("1ec2"),n("2877")),g=Object(h["a"])(p,l,c,!1,null,"24dbacd1",null),v=g.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vue-draggable-resizable",{attrs:{"class-name":"element","class-name-active":"selected-element",draggable:!0,"disable-user-select":!0,resizable:!1,minWidth:50,maxWidth:100,minHeight:20,maxHeight:50,w:200,h:50,x:e.elementData.x,y:e.elementData.y,z:e.elementData.z,parent:".game-field",onDragStart:e.onDragStart},on:{activated:e.onActivated,dragstop:e.onDragstop}},[e._v(e._s(e.elementData.name))])},b=[];function O(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function y(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};O(n,!0).forEach(function(t){Object(s["a"])(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):O(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}var j={props:{elementData:Object},computed:y({},Object(o["c"])({gameFieldSize:"game/gameFieldSize",elementsListFieldSize:"game/elementsListFieldSize",openedElements:"game/openedElements",activeElements:"game/activeElements",selectedElement:"game/selectedElement"})),methods:y({},Object(o["b"])({addActiveElement:"game/addActiveElement",removeActiveElement:"game/removeActiveElement",setSelectedElement:"game/setSelectedElement",setSelectedElementCoordinates:"game/setSelectedElementCoordinates",removeSelectedElement:"game/removeSelectedElement",updateOpenedElementsPositions:"game/updateOpenedElementsPositions"}),{onActivated(){this.setSelectedElement(this.elementData)},onDeactivated(){this.removeSelectedElement()},onDragStart(){this.setSelectedElement(this.elementData),this.setSelectedElementCoordinates({x:this.elementData.x,y:this.elementData.y,z:101})},onDragstop(e,t){if(this.setSelectedElementCoordinates({x:e,y:t}),e<this.gameFieldSize.x-this.elementsListFieldSize.x){const n=this.activeElements.length;let r=null;for(let e=0;e<n;e++)if(r=m(this.selectedElement,this.activeElements[e]),r){this.removeActiveElement(this.selectedElement.gameId),this.removeActiveElement(this.activeElements[e].gameId),this.addActiveElement(r);break}r||this.addActiveElement({_id:this.elementData._id,name:this.elementData.name,category:this.elementData.name.category,x:e,y:t,gameId:i["generate"]()})}this.removeSelectedElement(),this.$nextTick(()=>{this.updateOpenedElementsPositions()})}})},w=j,x=(n("d2cd"),Object(h["a"])(w,E,b,!1,null,"b6012f36",null)),S=x.exports,D=n("054a"),P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("font-awesome-icon",{staticClass:"fa-3x clear-game-field-button",attrs:{icon:"trash"},on:{dblclick:e.removeAllActiveElements}})},A=[];function _(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function z(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};_(n,!0).forEach(function(t){Object(s["a"])(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):_(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}var C={methods:z({},Object(o["b"])({removeAllActiveElements:"game/removeAllActiveElements"}))},I=C,F=(n("7006"),Object(h["a"])(I,P,A,!1,null,null,null)),k=F.exports,G=n("3f27");function M(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function $(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};M(n,!0).forEach(function(t){Object(s["a"])(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):M(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}var V={components:{Element:v,OpenedElement:S,GameField:D["default"],ClearGameField:k},mounted(){const e=document.getElementsByClassName("game-field");this.setGameFieldSize({x:e[0].clientWidth,y:e[0].clientHeight}),window.addEventListener("resize",()=>{this.setGameFieldSize({x:e[0].clientWidth,y:e[0].clientHeight}),this.updateOpenedElementsPositions()}),this.setActiveElements([{_id:"5c543755405e9d103878d4be",name:"Earth",category:"Elements",x:200,y:250,z:100,gameId:this.generateGameId()},{_id:"5c543755405e9d103878d4bf",name:"Fire",category:"Elements",x:400,y:250,z:100,gameId:this.generateGameId()},{_id:"5c543755405e9d103878d4c0",name:"Water",category:"Elements",x:600,y:250,z:100,gameId:this.generateGameId()}]),Object(G["b"])().then(e=>{if(200===e.status){for(let t=0;t<e.data.response.length;t++)e.data.response[t].x=null,e.data.response[t].y=null,e.data.response[t].z=100;this.setOpenedElements(e.data.response)}})},computed:$({},Object(o["c"])({gameFieldSize:"game/gameFieldSize",openedElements:"game/openedElements",activeElements:"game/activeElements",selectedElement:"game/selectedElement",openedCategories:"game/openedCategories"})),methods:$({},Object(o["b"])({setGameFieldSize:"game/setGameFieldSize",setOpenedElements:"game/setOpenedElements",addOpenedElement:"game/addOpenedElement",removeOpenedElement:"game/removeOpenedElement",setActiveElements:"game/setActiveElements",addActiveElement:"game/addActiveElement",removeActiveElement:"game/removeActiveElement",setSelectedElement:"game/setSelectedElement",setSelectedElementCoordinates:"game/setSelectedElementCoordinates",removeSelectedElement:"game/removeSelectedElement",setOpenedCategories:"game/setOpenedCategories",updateOpenedElementsPositions:"game/updateOpenedElementsPositions"}),{generateGameId(){let e=i["generate"]();for(let t=0;t<this.activeElements;t++)if(e===this.activeElements[t].gameId)return void this.generateGameId();return e}})},L=V,W=(n("552a"),Object(h["a"])(L,r,a,!1,null,"9e09d406",null));t["default"]=W.exports},"054a":function(e,t,n){"use strict";var r=n("2979"),a=n("fd4c"),s=(n("b93c"),n("2877")),i=Object(s["a"])(a["default"],r["a"],r["b"],!1,null,"5adbd3a7",null);t["default"]=i.exports},"069b":function(e,t,n){"use strict";var r=n("41fa"),a=n("3df9"),s=n("dd14"),i=n("9fc2")||0;function l(t){return r.seed(t),e.exports}function c(t){return i=t,e.exports}function o(e){return void 0!==e&&r.characters(e),r.shuffled()}function m(){return a(i)}e.exports=m,e.exports.generate=m,e.exports.seed=l,e.exports.worker=c,e.exports.characters=o,e.exports.isValid=s},"091d":function(e,t,n){"use strict";var r,a="object"===typeof window&&(window.crypto||window.msCrypto);r=a&&a.getRandomValues?function(e){return a.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(256*Math.random()));return t},e.exports=r},"0af3":function(e,t,n){},"19b9":function(e,t,n){},"1b48":function(e,t,n){},"1ec2":function(e,t,n){"use strict";var r=n("0af3"),a=n.n(r);a.a},2979:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-col",{staticClass:"game-field",attrs:{cols:"12"}},[e._t("default")],2)},a=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},"3df9":function(e,t,n){"use strict";var r,a,s=n("bd92"),i=(n("41fa"),1459707606518),l=6;function c(e){var t="",n=Math.floor(.001*(Date.now()-i));return n===a?r++:(r=0,a=n),t+=s(l),t+=s(e),r>0&&(t+=s(r)),t+=s(n),t}e.exports=c},"3f27":function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return m}),n.d(t,"a",function(){return u});var r=n("1da1"),a=n("bc3a"),s=n.n(a);function i(){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(function*(){try{const t=yield s.a.get("/api/elements");return t}catch(e){return e.response}}),l.apply(this,arguments)}function c(e,t){return o.apply(this,arguments)}function o(){return o=Object(r["a"])(function*(e,t){try{const r=yield s()({method:"post",url:"/api/element/add",data:{name:e,category:t}});return r}catch(n){return n.response}}),o.apply(this,arguments)}function m(e,t,n){return d.apply(this,arguments)}function d(){return d=Object(r["a"])(function*(e,t,n){try{const a=yield s()({method:"put",url:"/api/element/update",data:{elementId:e,newName:t,newCategory:n}});return a}catch(r){return r.response}}),d.apply(this,arguments)}function u(e){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(function*(e){try{const n=yield s()({method:"delete",url:"/api/element/delete",data:{elementId:e}});return n}catch(t){return t.response}}),f.apply(this,arguments)}},"41fa":function(e,t,n){"use strict";var r,a,s,i=n("7eac"),l="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function c(){s=!1}function o(e){if(e){if(e!==r){if(e.length!==l.length)throw new Error("Custom alphabet for shortid must be "+l.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter(function(e,t,n){return t!==n.lastIndexOf(e)});if(t.length)throw new Error("Custom alphabet for shortid must be "+l.length+" unique characters. These characters were not unique: "+t.join(", "));r=e,c()}}else r!==l&&(r=l,c())}function m(e){return o(e),r}function d(e){i.seed(e),a!==e&&(c(),a=e)}function u(){r||o(l);var e,t=r.split(""),n=[],a=i.nextValue();while(t.length>0)a=i.nextValue(),e=Math.floor(a*t.length),n.push(t.splice(e,1)[0]);return n.join("")}function f(){return s||(s=u(),s)}function p(e){var t=f();return t[e]}function h(){return r||l}e.exports={get:h,characters:m,seed:d,lookup:p,shuffled:f}},"509d":function(e,t){},"552a":function(e,t,n){"use strict";var r=n("9318"),a=n.n(r);a.a},7006:function(e,t,n){"use strict";var r=n("f8f0"),a=n.n(r);a.a},"7eac":function(e,t,n){"use strict";var r=1;function a(){return r=(9301*r+49297)%233280,r/233280}function s(e){r=e}e.exports={nextValue:a,seed:s}},"8dee":function(e,t,n){"use strict";e.exports=n("069b")},9318:function(e,t,n){},"9fc2":function(e,t,n){"use strict";e.exports=0},b93c:function(e,t,n){"use strict";var r=n("1b48"),a=n.n(r);a.a},bd92:function(e,t,n){"use strict";var r=n("41fa"),a=n("091d"),s=n("c903");function i(e){var t,n=0,i="";while(!t)i+=s(a,r.get(),1),t=e<Math.pow(16,n+1),n++;return i}e.exports=i},c903:function(e,t){e.exports=function(e,t,n){var r=(2<<Math.log(t.length-1)/Math.LN2)-1,a=Math.ceil(1.6*r*n/t.length);n=+n;var s="";while(1)for(var i=e(a),l=0;l<a;l++){var c=i[l]&r;if(t[c]&&(s+=t[c],s.length===n))return s}}},d2cd:function(e,t,n){"use strict";var r=n("19b9"),a=n.n(r);a.a},dd14:function(e,t,n){"use strict";var r=n("41fa");function a(e){if(!e||"string"!==typeof e||e.length<6)return!1;var t=new RegExp("[^"+r.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]");return!t.test(e)}e.exports=a},f8f0:function(e,t,n){},fd4c:function(e,t,n){"use strict";var r=n("509d"),a=n.n(r);t["default"]=a.a}}]);
//# sourceMappingURL=Game.da215c14.js.map