(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Users"],{"20fb":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",[s("Table",{attrs:{data:e.users,fields:e.fields,totalRows:e.totalRows,loading:e.loading.users,error:e.errors.users,target:"user",commonButton:!1,deleteButton:!1},on:{editButtonClick:e.beforeSaveUser}}),s("b-modal",{attrs:{title:"Edit user",size:"xl","hide-header-close":"hide-header-close","ok-title":"Save","ok-variant":"success","ok-disabled":e.loading.blockUser,"cancel-disabled":e.loading.blockUser,"cancel-variant":"danger"},on:{ok:e.saveUser,hidden:e.afterSaveUser},model:{value:e.modals.edit,callback:function(t){e.$set(e.modals,"edit",t)},expression:"modals.edit"}},[s("b-row",[s("b-col",{attrs:{cols:"5"}},[s("b-row",[s("b-col",{attrs:{cols:"9"}},[s("b-form-group",{attrs:{"label-cols":4,label:"Username:"}},[s("b-form-input",{attrs:{type:"text",readonly:"readonly"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1)],1),s("b-col",{attrs:{cols:"9"}},[s("b-form-group",{attrs:{"label-cols":4,label:"Email:"}},[s("b-form-input",{attrs:{type:"text",readonly:"readonly"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1)],1),s("b-col",{staticClass:"pl-0",attrs:{cols:"3"}},[s("b-btn",{attrs:{variant:"primary",disabled:e.resetPassword},on:{click:function(t){e.resetPassword=!0}}},[s("font-awesome-icon",{attrs:{icon:"key"}})],1)],1),s("b-col",{attrs:{cols:"9"}},[s("b-form-group",{attrs:{"label-cols":4,label:"Created:"}},[s("b-form-input",{attrs:{type:"text",readonly:"readonly"},model:{value:e.user.created,callback:function(t){e.$set(e.user,"created",t)},expression:"user.created"}})],1)],1),s("b-col",{attrs:{cols:"9"}},[s("b-form-group",{attrs:{"label-cols":4,label:"Last entered:"}},[s("b-form-input",{attrs:{type:"text",readonly:"readonly"},model:{value:e.user.lastEntered,callback:function(t){e.$set(e.user,"lastEntered",t)},expression:"user.lastEntered"}})],1)],1),s("b-col",{attrs:{cols:"9"}},[s("b-form-group",{attrs:{"label-cols":4,label:"Disabled:"}},[s("b-form-input",{attrs:{type:"text",readonly:"readonly"},model:{value:e.user.isDisabled,callback:function(t){e.$set(e.user,"isDisabled",t)},expression:"user.isDisabled"}})],1)],1),s("b-col",{staticClass:"pl-0",attrs:{cols:"3"}},[e.user.isDisabled?e._e():s("b-btn",{attrs:{variant:"success"},on:{click:function(t){e.user.isDisabled=!0}}},[s("font-awesome-icon",{attrs:{icon:"user"}})],1),e.user.isDisabled?s("b-btn",{attrs:{variant:"danger"},on:{click:function(t){e.user.isDisabled=!1}}},[s("font-awesome-icon",{attrs:{icon:"user-slash"}})],1):e._e()],1),s("b-col",{attrs:{cols:"9"}},[s("b-form-group",{attrs:{"label-cols":4,label:"Role:"}},[s("b-form-input",{attrs:{type:"text",readonly:"readonly"},model:{value:e.user.role,callback:function(t){e.$set(e.user,"role",t)},expression:"user.role"}})],1)],1),s("b-col",{staticClass:"pl-0",attrs:{cols:"3"}},["Admin"!=e.user.role?s("b-btn",{attrs:{variant:"success"},on:{click:function(t){e.user.role="Admin"}}},[s("font-awesome-icon",{attrs:{icon:"arrow-up"}})],1):e._e(),"User"==e.user.role?s("b-btn",{attrs:{variant:"danger"},on:{click:function(t){e.user.role="User"}}},[s("font-awesome-icon",{attrs:{icon:"arrow-down"}})],1):e._e()],1)],1)],1),s("b-col",{attrs:{cols:"7"}},[s("b-row",[s("b-col",{attrs:{cols:"12"}},[s("h5",[e._v("\r\n              Opened elements\r\n            ")]),s("b-progress",{staticClass:"mb-3",attrs:{value:e.userElements.length,max:e.maxElements,"show-value":"show-value"}})],1)],1)],1)],1)],1)],1)},a=[],n=s("e46a"),l=s("bc3a"),o=s.n(l);function i(e,t,s,r,a,n,l){try{var o=e[n](l),i=o.value}catch(u){return void s(u)}o.done?t(i):Promise.resolve(i).then(r,a)}function u(e){return function(){var t=this,s=arguments;return new Promise(function(r,a){var n=e.apply(t,s);function l(e){i(n,r,a,l,o,"next",e)}function o(e){i(n,r,a,l,o,"throw",e)}l(void 0)})}}function c(){return d.apply(this,arguments)}function d(){return d=u(function*(){try{const t=yield o()({method:"get",url:"/api/users"});return t}catch(e){return e.response}}),d.apply(this,arguments)}var b=s("5edc"),m=s("3f27"),p={components:{Table:n["a"]},mounted(){this.loading.users=!0,c().then(e=>{this.loading.users=!1,200===e.status?(this.users=e.data.response,this.totalRows=e.data.response.length,this.transformDate()):this.errors.users=e.data}),Object(m["b"])().then(e=>{200===e.status&&(this.maxElements=e.data.response.length)})},data(){return{users:[],user:{username:null,email:null,created:null,lastEntered:null,isDisabled:null,role:null},userElements:[],maxElements:0,modals:{edit:!1},loading:{users:!1,userElements:!1,blockUser:!1,resetPassword:!1,changeRole:!1},errors:{users:null,userElements:null,blockUser:null,resetPassword:null,changeRole:null},resetPassword:!1,totalRows:0,fields:[{key:"username",label:"Username",class:"align-middle text-center",sortable:!0},{key:"created",label:"Created",class:"align-middle text-center",sortable:!0},{key:"lastEntered",label:"Last entered",class:"align-middle text-center",sortable:!0},{key:"isDisabled",label:"Disabled",class:"align-middle text-center",sortable:!0},{key:"action",label:"Action",class:"align-middle text-center",sortable:!1}]}},methods:{getUserElements(){this.loading.userElements=!0,Object(b["b"])(this.user._id).then(e=>{this.loading.userElements=!1,200===e.status?this.userElements=e.data.elements:this.errors.userElements=e.data})},transformDate(){for(let e=0;e<this.users.length;e++){const t=new Date(this.users[e].created),s=new Date(this.users[e].lastEntered);let r=t.getDate(),a=t.getMonth()+1,n=t.getHours(),l=t.getMinutes();r<10&&(r=`0${r}`),a<10&&(a=`0${a}`),n<10&&(n=`0${n}`),l<10&&(l=`0${l}`),this.users[e].created=`${r}.${a}.${t.getFullYear()} ${n}:${l}`,r=s.getDate(),a=s.getMonth()+1,n=s.getHours(),l=s.getMinutes(),r<10&&(r=`0${r}`),a<10&&(a=`0${a}`),n<10&&(n=`0${n}`),l<10&&(l=`0${l}`),this.users[e].lastEntered=`${r}.${a}.${s.getFullYear()} ${n}:${l}`}},beforeBlockUser(){this.user.isDisabled=!0},blockUser(){},afterBlockUser(){},beforeSaveUser(e){this.modals.edit=!0,this.user=e.item,this.getUserElements()},saveUser(){this.resetPassword&&Object(b["d"])(this.user.email).then(e=>{e.status})},afterSaveUser(){this.modals.edit=!1,this.user={}}}},f=p,h=s("2877"),g=Object(h["a"])(f,r,a,!1,null,null,null);t["default"]=g.exports},"3f27":function(e,t,s){"use strict";s.d(t,"b",function(){return o}),s.d(t,"c",function(){return u}),s.d(t,"d",function(){return d}),s.d(t,"a",function(){return m});var r=s("bc3a"),a=s.n(r);function n(e,t,s,r,a,n,l){try{var o=e[n](l),i=o.value}catch(u){return void s(u)}o.done?t(i):Promise.resolve(i).then(r,a)}function l(e){return function(){var t=this,s=arguments;return new Promise(function(r,a){var l=e.apply(t,s);function o(e){n(l,r,a,o,i,"next",e)}function i(e){n(l,r,a,o,i,"throw",e)}o(void 0)})}}function o(){return i.apply(this,arguments)}function i(){return i=l(function*(){try{const t=yield a.a.get("/api/elements");return t}catch(e){return e.response}}),i.apply(this,arguments)}function u(e,t){return c.apply(this,arguments)}function c(){return c=l(function*(e,t){try{const r=yield a()({method:"post",url:"/api/element/add",data:{name:e,category:t}});return r}catch(s){return s.response}}),c.apply(this,arguments)}function d(e,t,s,r){return b.apply(this,arguments)}function b(){return b=l(function*(e,t,s,r){try{const l=yield a()({method:"put",url:"/api/element/update",data:{elementId:e,name:t,description:s,category:r}});return l}catch(n){return n.response}}),b.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=l(function*(e){try{const s=yield a()({method:"delete",url:"/api/element/delete",data:{elementId:e}});return s}catch(t){return t.response}}),p.apply(this,arguments)}},e46a:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data-table"},[s("b-row",{staticClass:"mb-3"},[s("b-col",{attrs:{cols:"4"}},[s("b-input-group",[s("b-form-input",{attrs:{placeholder:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),s("b-input-group-append",[s("b-btn",{attrs:{disabled:!e.search},on:{click:function(t){e.search=null}}},[e._v("\n            Clear\n          ")])],1)],1)],1),s("b-col",{attrs:{cols:"4",sm:"3",md:"2",lg:"2",xl:"2"}},[e.commonButton?s("b-btn",{staticClass:"mb-3",attrs:{variant:"success"},on:{click:e.commonButtonClick}},[e._v("\n        Create "+e._s(e.target)+"\n      ")]):e._e()],1),e._t("default",null,{type:"button"}),s("b-col",{attrs:{cols:"4",sm:"3",md:"2",lg:"2",xl:"2","offset-md":"4"}},[s("b-form-select",{attrs:{options:e.pagination.pageOptions},model:{value:e.pagination.perPage,callback:function(t){e.$set(e.pagination,"perPage",t)},expression:"pagination.perPage"}})],1)],2),s("b-row",[s("b-col",{attrs:{cols:"12"}},[s("div",{staticClass:"text-center"},[e.loading?s("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"success"}}):e._e()],1),e.error?s("b-alert",{staticClass:"text-center",attrs:{show:"show",variant:"danger"}},[e._v("\n        "+e._s(e.error)+"\n      ")]):e._e(),e.loading||e.error?e._e():s("b-table",{attrs:{"show-empty":"show-empty",responsive:"responsive",hover:"hover",flex:"flex",items:e.data,fields:e.fields,"current-page":e.pagination.currentPage,"per-page":e.pagination.perPage,filter:e.search},scopedSlots:e._u([{key:"action",fn:function(t){return[s("b-button-group",{attrs:{size:"sm"}},[e.editButton?s("b-btn",{staticClass:"mr-1",attrs:{variant:"warning",size:"sm"},on:{click:function(s){return e.editButtonClick(t)}}},[s("font-awesome-icon",{attrs:{icon:"edit"}})],1):e._e(),e.deleteButton?s("b-btn",{attrs:{variant:"danger",size:"sm"},on:{click:function(s){return e.deleteButtonClick(t)}}},[s("font-awesome-icon",{attrs:{icon:"trash"}})],1):e._e()],1)]}}],null,!1,3492659067)},[s("b-pagination",{attrs:{align:"center","total-rows":e.totalRows,"per-page":e.pagination.perPage},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}})],1)],1)],1)],1)},a=[],n={props:{data:{value:Array,default:[]},fields:{value:Array,default:[]},totalRows:{value:Number,default:0},loading:{value:Boolean,default:!1},error:String,target:{value:String,default:""},commonButton:{value:Boolean,default:!0},editButton:{value:Boolean,default:!0},deleteButton:{value:Boolean,default:!0}},data(){return{search:null,pagination:{perPage:10,currentPage:1,pageOptions:[5,10,25,50]}}},methods:{commonButtonClick(){this.$emit("commonButtonClick")},editButtonClick(e){this.$emit("editButtonClick",e)},deleteButtonClick(e){this.$emit("deleteButtonClick",e)}}},l=n,o=s("2877"),i=Object(o["a"])(l,r,a,!1,null,null,null);t["a"]=i.exports}}]);
//# sourceMappingURL=Users.9ba2683c.js.map