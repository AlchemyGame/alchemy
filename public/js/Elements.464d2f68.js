(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Elements"],{"3f27":function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"d",function(){return c}),a.d(t,"a",function(){return u});var r=a("1da1"),n=a("bc3a"),l=a.n(n);function i(){return s.apply(this,arguments)}function s(){return s=Object(r["a"])(function*(){try{const t=yield l.a.get("/api/elements");return t}catch(e){return e.response}}),s.apply(this,arguments)}function o(e,t){return d.apply(this,arguments)}function d(){return d=Object(r["a"])(function*(e,t){try{const r=yield l()({method:"post",url:"/api/element/add",data:{name:e,category:t}});return r}catch(a){return a.response}}),d.apply(this,arguments)}function c(e,t,a){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(function*(e,t,a){try{const n=yield l()({method:"put",url:"/api/element/update",data:{elementId:e,newName:t,newCategory:a}});return n}catch(r){return r.response}}),m.apply(this,arguments)}function u(e){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(function*(e){try{const a=yield l()({method:"delete",url:"/api/element/delete",data:{elementId:e}});return a}catch(t){return t.response}}),b.apply(this,arguments)}},"63c6":function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return o});var r=a("1da1"),n=a("bc3a"),l=a.n(n);function i(){return s.apply(this,arguments)}function s(){return s=Object(r["a"])(function*(){try{const t=yield l.a.get("/api/categories");return t}catch(e){return e.response}}),s.apply(this,arguments)}function o(e){return d.apply(this,arguments)}function d(){return d=Object(r["a"])(function*(e){try{const a=yield l()({method:"post",url:"/api/category/add",data:{name:e}});return a}catch(t){return t.response}}),d.apply(this,arguments)}},ae8c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{cols:"4"}},[a("b-input-group",[a("b-form-input",{attrs:{placeholder:"Search"},model:{value:e.data.table.search,callback:function(t){e.$set(e.data.table,"search",t)},expression:"data.table.search"}}),a("b-input-group-append",[a("b-btn",{attrs:{disabled:!e.data.table.search},on:{click:function(t){e.data.table.search=null}}},[e._v("Clear")])],1)],1)],1),a("b-col",{attrs:{cols:"4",sm:"3",md:"2",lg:"2",xl:"2"}},[a("b-btn",{staticClass:"mb-3",attrs:{variant:"success"},on:{click:function(t){return e.createElementModalShow()}}},[e._v("Create element")])],1),a("b-col",{attrs:{cols:"4",sm:"3",md:"2",lg:"2",xl:"2","offset-md":"4"}},[a("b-form-select",{attrs:{options:e.data.table.pagination.pageOptions},model:{value:e.data.table.pagination.perPage,callback:function(t){e.$set(e.data.table.pagination,"perPage",t)},expression:"data.table.pagination.perPage"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"12"}},[e.data.table.loading?a("loading-spinner",{attrs:{size:"large"}}):e._e(),e.data.table.error?a("b-row",{staticClass:"justify-content-md-center"},[a("b-col",{staticClass:"error",attrs:{cols:"12",md:"auto"}},[a("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(e._s(e.data.table.error))])],1)],1):e._e(),e.data.table.loading||e.data.table.error?e._e():a("b-table",{attrs:{"show-empty":"",responsive:"",hover:"",flex:"",items:e.data.elements,fields:e.data.table.fields,"current-page":e.data.table.pagination.currentPage,"per-page":e.data.table.pagination.perPage,filter:e.data.table.search},scopedSlots:e._u([{key:"action",fn:function(t){return[a("b-button-group",{attrs:{size:"sm"}},[a("b-btn",{staticClass:"mr-1",attrs:{variant:"warning",size:"sm"},on:{click:function(a){return e.editElementModalShow(t)}}},[a("font-awesome-icon",{attrs:{icon:"edit"}})],1),a("b-btn",{attrs:{variant:"danger",size:"sm"},on:{click:function(a){return e.deleteElementModalShow(t)}}},[a("font-awesome-icon",{attrs:{icon:"trash"}})],1)],1)]}}],null,!1,1429895710)}),a("b-pagination",{attrs:{align:"center","total-rows":e.data.table.totalRows,"per-page":e.data.table.pagination.perPage},model:{value:e.data.table.pagination.currentPage,callback:function(t){e.$set(e.data.table.pagination,"currentPage",t)},expression:"data.table.pagination.currentPage"}})],1)],1),a("b-modal",{ref:"createElementModal",attrs:{title:"Create new element",size:"xl","hide-header-close":"","no-close-on-backdrop":"","no-close-on-esc":"","ok-title":"Create","ok-variant":"success","cancel-variant":"danger"},on:{ok:e.createElement,cancel:e.createElementModalHide}},[e.data.create.loading?a("loading-spinner",{attrs:{size:"large"}}):e._e(),e.data.create.error?a("b-row",{staticClass:"justify-content-md-center"},[a("b-col",{staticClass:"error",attrs:{cols:"12",md:"auto"}},[a("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(e._s(e.data.create.error))])],1)],1):e._e(),e.data.create.loading||e.data.create.error?e._e():a("b-row",[a("b-col",{attrs:{md:"4"}},[a("b-row",[a("b-col",{attrs:{md:"12"}},[a("b-form-group",{attrs:{"label-cols":3,label:"Name:","label-for":"createElementName"}},[a("b-form-input",{attrs:{id:"createElementName",required:"",type:"text",state:e.validateName(e.data.create.name,e.data.elements),placeholder:"Fire"},model:{value:e.data.create.name,callback:function(t){e.$set(e.data.create,"name",t)},expression:"data.create.name"}})],1)],1)],1),a("b-row",[a("b-col",{attrs:{md:"12"}},[a("b-form-group",{attrs:{"label-cols":3,label:"Category:","label-for":"createElementCategory"}},[e.data.newCategory.active?e._e():a("b-form-select",{attrs:{id:"createElementCategory",required:"",type:"text",state:e.validateNull(e.data.create.categoryId)},model:{value:e.data.create.categoryId,callback:function(t){e.$set(e.data.create,"categoryId",t)},expression:"data.create.categoryId"}},e._l(e.data.categories,function(t){return a("option",{domProps:{value:t._id}},[e._v(e._s(t.name))])}),0),e.data.newCategory.active?a("b-form-input",{attrs:{id:"createElementCategory",required:"",type:"text",state:e.validateName(e.data.newCategory.name,e.data.categories),placeholder:"Elements"},model:{value:e.data.newCategory.name,callback:function(t){e.$set(e.data.newCategory,"name",t)},expression:"data.newCategory.name"}}):e._e()],1)],1)],1),!1===e.data.newCategory.active?a("b-row",[a("b-col",{attrs:{md:"12"}},[a("b-btn",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(t){e.data.newCategory.active=!0,e.data.create.categoryId=null}}},[a("font-awesome-icon",{attrs:{icon:"plus"}}),e._v(" New category")],1)],1)],1):e._e(),!0===e.data.newCategory.active?a("b-row",[a("b-col",{attrs:{md:"12"}},[a("b-btn",{staticClass:"float-right",attrs:{variant:"light",size:"sm"},on:{click:function(t){e.data.newCategory.active=!1,e.data.newCategory.name=null}}},[a("font-awesome-icon",{attrs:{icon:"clipboard"}}),e._v(" Choose category")],1)],1)],1):e._e()],1),a("b-col",{attrs:{md:"8"}},[a("b-card",{attrs:{"no-body":""}},[a("b-tabs",{attrs:{card:"",pills:"",vertical:"",small:"","nav-wrapper-class":"w-25"}},e._l(e.data.categories,function(t){return a("b-tab",{key:t._id,attrs:{title:t.name}},e._l(e.data.elements,function(r){return r.category===t.name?a("b-btn",{key:r._id,staticClass:"mr-2 mb-2",attrs:{size:"sm",variant:"outline-success"},on:{click:function(t){e.data.create.name=r.name}}},[e._v(e._s(r.name))]):e._e()}),1)}),1)],1)],1)],1)],1),a("b-modal",{ref:"editElementModal",attrs:{title:"Edit element",size:"xl","hide-header-close":"","no-close-on-backdrop":"","no-close-on-esc":"","ok-title":"Save","ok-variant":"success","cancel-variant":"danger"},on:{show:e.getCategories,ok:e.editElement,cancel:e.editElementModalHide}},[e.data.edit.loading?a("loading-spinner",{attrs:{size:"large"}}):e._e(),e.data.edit.error?a("b-row",{staticClass:"justify-content-md-center"},[a("b-col",{staticClass:"error",attrs:{cols:"12",md:"auto"}},[a("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(e._s(e.data.edit.error))])],1)],1):e._e(),e.data.edit.loading||e.data.edit.error?e._e():a("b-row",[a("b-col",{attrs:{md:"4"}},[a("b-form-group",{attrs:{"label-cols":3,label:"Name:","label-for":"editElementName"}},[a("b-form-input",{attrs:{id:"editElementName",required:"",type:"text",state:e.validateName(e.data.edit.name,e.data.elements),placeholder:"Fire"},model:{value:e.data.edit.name,callback:function(t){e.$set(e.data.edit,"name",t)},expression:"data.edit.name"}})],1),a("b-form-group",{attrs:{"label-cols":3,label:"Category:","label-for":"editCategory"}},[a("b-form-select",{attrs:{id:"editCategory",required:"",type:"text",state:e.validateNull(e.data.edit.categoryId)},model:{value:e.data.edit.categoryId,callback:function(t){e.$set(e.data.edit,"categoryId",t)},expression:"data.edit.categoryId"}},e._l(e.data.categories,function(t){return a("option",{domProps:{value:t._id}},[e._v(e._s(t.name))])}),0)],1)],1),a("b-col",{attrs:{md:"8"}},[a("b-card",{attrs:{"no-body":""}},[a("b-tabs",{attrs:{card:"",pills:"",vertical:"",small:"","nav-wrapper-class":"w-25"}},e._l(e.data.categories,function(t){return a("b-tab",{key:t._id,attrs:{title:t.name}},e._l(e.data.elements,function(r){return r.category===t.name?a("b-btn",{key:r._id,staticClass:"mr-2 mb-2",attrs:{size:"sm",variant:"outline-success"},on:{click:function(t){e.data.edit.name=r.name}}},[e._v(e._s(r.name))]):e._e()}),1)}),1)],1)],1)],1)],1),a("b-modal",{ref:"deleteElementModal",attrs:{size:"md","hide-header-close":"","no-close-on-backdrop":"","no-close-on-esc":"","ok-title":"Delete","ok-variant":"success","cancel-variant":"danger","hide-header":""},on:{ok:e.deleteElement,cancel:e.deleteElementModalHide}},[a("b-row",{staticClass:"justify-content-md-center"},[a("b-col",{attrs:{cols:"12",md:"auto"}},[a("h4",[e._v("Delete element"),a("strong",{staticClass:"text-danger"},[e._v(" "+e._s(e.data.delete.name))]),e._v("?")])])],1)],1)],1)},n=[],l=a("3f27"),i=a("63c6"),s={name:"ElementsEditor",created(){this.getElements(),this.getCategories()},watch:{$route:"getElements"},data(){return{data:{elements:[],categories:[],table:{totalRows:0,loading:!1,error:null,fields:[{key:"category",class:"align-middle text-center",sortable:!0},{key:"name",class:"align-middle text-center",sortable:!0},{key:"recipe",label:"Recipe",class:"align-middle text-center",sortable:!1},{key:"description",label:"Description",class:"align-middle text-center",sortable:!1},{key:"action",label:"Action",class:"align-middle text-center",sortable:!1}],pagination:{perPage:10,currentPage:1,pageOptions:[5,10,25,50]},search:null},create:{loading:!1,error:null,name:null,categoryId:null},delete:{loading:!1,error:null,_id:null,name:null},edit:{loading:!1,error:null,_id:null,name:null,categoryId:null},newCategory:{active:!1,name:null}}}},methods:{getElements(){this.data.table.loading=!0,Object(l["b"])().then(e=>{this.data.table.loading=!1,200===e.status?(this.data.elements=e.data.response,this.data.table.totalRows=this.data.elements.length,this.data.table.error=null):this.data.table.error=e.data})},getCategories(){Object(i["a"])().then(e=>{this.data.create.loading=!1,200===e.status?(this.data.categories=e.data.response,this.data.create.error=null,this.data.edit.error=null):(this.data.create.error=e.data,this.data.edit.error=e.data)})},onTableSearch(e){this.data.table.totalRows=e.length,this.data.table.pagination.currentPage=1},validateNull(e){return!!e},validateName(e,t){if(e){e=e.trim();for(let a in t)if(e===t[a].name||e===t[a].name.toLowerCase())return!1;return!0}return null},createElement(e){!0===this.validateNull(this.data.create.name)&&!0===this.validateName(this.data.create.name,this.data.elements)&&!0===this.validateNull(this.data.create.categoryId)?(this.data.create.loading=!0,Object(l["c"])(this.data.create.name.trim(),this.data.create.categoryId).then(e=>{this.data.create.loading=!1,201===e.status?(this.getElements(),this.createElementModalHide(),this.data.create.error=null):this.data.create.error=e.data})):this.data.newCategory.name?Object(i["b"])(this.data.newCategory.name).then(e=>{201===e.status?(this.data.create.categoryId=e.data.response._id,this.createElement(),this.data.newCategory.name=null):this.data.create.error=e.data}):e.preventDefault()},editElement(e){!0===this.validateName(this.data.edit.name,this.data.elements)?(this.data.edit.loading=!0,Object(l["d"])(this.data.edit._id,this.data.edit.name,this.data.edit.categoryId).then(e=>{this.data.edit.loading=!1,200===e.status?(this.getElements(),this.editElementModalHide(),this.data.edit.error=null):this.data.edit.error=e.data})):e.preventDefault()},deleteElement(e){this.data.delete.loading=!0,Object(l["a"])(this.data.delete._id).then(t=>{this.data.delete.loading=!1,200===t.status?(this.getElements(),this.data.delete.error=null):(this.data.delete.error=t.data,e.preventDefault())})},createElementModalShow(){this.$refs.createElementModal.show(),this.getCategories()},editElementModalShow(e){this.$refs.editElementModal.show(),this.data.edit._id=e.item._id,this.data.edit.name=e.item.name;for(let t=0;t<this.data.categories.length;t++)this.data.categories[t].name===e.item.category&&(this.data.edit.categoryId=this.data.categories[t]._id)},deleteElementModalShow(e){this.$refs.deleteElementModal.show(),this.data.delete._id=e.item._id,this.data.delete.name=e.item.name},createElementModalHide(){this.$refs.createElementModal.hide(),this.data.create.name=null,this.data.create.categoryId=null},editElementModalHide(){this.$refs.editElementModal.hide(),this.data.edit._id=null,this.data.edit.name=null,this.data.edit.categoryId=null},deleteElementModalHide(){this.$refs.deleteElementModal.hide()}}},o=s,d=a("2877"),c=Object(d["a"])(o,r,n,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=Elements.464d2f68.js.map